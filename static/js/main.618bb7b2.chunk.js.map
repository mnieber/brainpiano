{"version":3,"sources":["webpack:///./src/index.css?68b8","webpack:///./src/quiz/components/QuizFrame.scss?a323","webpack:///./src/voicings/components/VoicingTitle.scss?abc6","groups/components/GroupsFrame.scss","groups/components/GroupsFrameTopPanel.scss","webpack:///./src/groups/components/GroupPicker.scss?5697","groups/components/GroupsFrameLeftPanel.scss","keyboard/components/ClefListView.scss","webpack:///./src/keyboard/components/ClefListViewItem.scss?7f46","webpack:///./src/io/components/IoMenu.scss?3647","quiz/components/QuizFrameTopPanel.scss","webpack:///./src/app/components/App.scss?2ba2","quiz/components/QuizFrame.tsx","utils/mathMod.ts","voicings/noteConstants.ts","keyboard/keyConstants.ts","quiz/utils/voicingTitleFromQuery.ts","voicings/components/VoicingTitle.tsx","groups/components/GroupsFrame.tsx","groups/components/GroupsFrameTopPanel.tsx","utils/components/ValuePicker.tsx","groups/components/GroupPicker.tsx","groups/components/GroupsFrameLeftPanel.tsx","utils/components/Effect.tsx","utils/RST.ts","utils/components/ResourceView.tsx","groups/components/LoadGroupsEffect.tsx","groups/components/SelectGroupEffect.tsx","keyboard/components/ClefModulationSelector.tsx","keyboard/components/ClefSelector.tsx","keyboard/components/Marker.tsx","keyboard/components/Key.tsx","keyboard/noteColours.ts","keyboard/utils/noteValueToColour.ts","keyboard/components/Octave.tsx","voicings/utils/playChord.ts","voicings/components/InversionSelector.tsx","voicings/components/RandomChordSelector.tsx","keyboard/components/Keyboard.tsx","keyboard/components/ClefListView.tsx","keyboard/components/ClefListViewItem.tsx","voicings/parse.ts","io/components/IoMenu.tsx","quiz/components/QuizFrameTopPanel.tsx","quiz/components/QuizView.tsx","utils/ids.ts","quiz/QuizState/policies/selectClefBasedOnPreselection.ts","utils/random.ts","voicings/utils/invertChord.ts","voicings/utils/voicingToChord.ts","quiz/utils/createQuery.ts","quiz/QuizState/facets/Inputs.ts","quiz/QuizState/facets/Outputs.ts","quiz/QuizState/index.ts","voicings/voicingGroups.ts","quiz/components/QuizStateProvider.tsx","app/components/UrlRouter.tsx","app/components/App.tsx","app/AppStore/policies/voicingStoreUsesSelectedClef.ts","groups/GroupsStore.ts","keyboard/ClefStore.ts","keyboard/PreselectionStore.ts","voicings/VoicingStore.ts","app/AppStore/index.ts","app/components/StoreProvider.tsx","app/components/useStore.ts","reportWebVitals.ts","index.tsx","webpack:///./src/keyboard/components/Keyboard.css?49b5"],"names":["QuizFrame","observer","props","appStore","useStore","React","useEffect","handleResize","setWindowWidth","window","innerWidth","addEventListener","classnames","children","mathMod","m","p","isInteger","NaN","root","flat9","ninth","sharp9","flat3","third","fourth","eleventh","sharp4","sharp11","flat5","fifth","sharp5","flat6","flat13","sixth","thirteenth","flat7","seventh","noteNameByValue","valueByNoteName","two","second","nine","three","four","eleven","five","six","thirteen","seven","clefC","clefCSharp","clefCFlat","clefD","clefDSharp","clefDFlat","clefE","clefESharp","clefEFlat","clefF","clefFSharp","clefFFlat","clefG","clefGSharp","clefGFlat","clefA","clefASharp","clefAFlat","clefB","clefBSharp","clefBFlat","clefs","clefOffsets","clefLetters","whiteKeyIndexes","blackKeyIndexes","isWhiteKeyIndex","keyIndex","includes","nrOfNotesInOctave","octaveRootNoteValue","octaveIndex","noteValueToIndex","noteValue","voicingTitleFromQuery","query","noteIndex","inversion","voicing","chord","length","startNoteIdx","startNoteName","clef","name","VoicingTitle","label","GroupsFrame","GroupsFrameTopPanel","ValuePicker","isMulti","isCreatable","pickableValue","pickableValues","labelFromValue","others","toPickerValue","pickableVal","__isNew__","value","options","map","pickerProps","isNil","undefined","onKeyDown","e","picker","zIndex","GroupPicker","useDefaultProps","onChange","action","values","groupsSelection","ids","x","id","className","groups","items","GroupsFrameLeftPanel","EffectWithoutArgs","f","useDeepCompareEffect","cleanUpFunction","RESET","UPDATING","ERRORED","UPDATED","LOADING","resetRS","type","isResetRS","rs","updatingRS","updating_state","isUpdatingRS","erroredRS","message","isErroredRS","updatedRS","isUpdatedRS","loadingRS","updateRes","rsMap","update","then","getErrorMsg","result","catch","defaultRenderErrored","defaultRenderUpdating","ResourceView","renderErrored","renderUpdating","tryRenderUpdated","renderUpdated","catchAll","Error","renderReset","LoadGroupsEffect","groupsStore","loadGroups","SelectGroupEffect","ClefModulationSelector","preselectionStore","key","setIsSharpening","setIsFlattening","reset","ClefSelector","setClefLetter","Marker","filledStripeHeight","bgStripeHeight","nrOfStripes","Math","ceil","height","isStriped","flow","always","range","stripeIdx","y","min","offsetX","offsetY","fill","width","whiteKeyProps","markerHeight","blackKeyProps","whiteKeyX","i","fraction","blackKeyX","getKeyX","isWhiteKey","keyX","keyIndexes","indexOf","Key","index","keyProps","markerOffsetY","scaleFactor","markerColour","markerIsStriped","noteColours","noteValueToColour","harmonicColour","endsWith","colour","split","Octave","concat","keys","add","AudioContext","webkitAudioContext","context","synth","AudioSynth","playChord","forEach","note","idx","setTimeout","playNote","InversionSelector","voicingStore","setInversion","quizState","RandomChordSelector","pickRandomChord","Keyboard","clefStore","octaves","onClick","ClefListView","clefDivs","clefsSelection","selectItem","itemId","isShift","isCtrl","noItems","ClefListViewItem","onMouseDown","parseVoicing","data","console","log","parseVoicingGroup","voicings","cache","parseVoicingGroups","twitterUrl","IoMenu","eventKey","navigator","clipboard","writeText","JSON","stringify","open","readText","clipText","setGroups","parse","QuizFrameTopPanel","HelpButton","nextQuery","QuizView","useMemo","listToItemById","qsList","item","getIds","selectClefBasedOnPreselection","handler","event","topic","details","clefLetter","isSharpening","isFlattening","setClef","signal","remove","randomElement","floor","random","size","invertChord","pos","rotate","arr","maxNote","first","take","last","takeRight","rotateBack","minNote","times","constant","abs","getInversionRange","topC","minInversion","maxInversion","l","voicingToChord","rootNoteValue","keyOffset","getRandomInversion","L","inversionRange","filter","inversions","createQuery","nrVoicings","sumBy","voicingIdx","groupIdx","count","group","Inputs","input","Outputs","groupsDisplay","output","computed","QuizState","selection","Selection","highlight","Highlight","registerFacets","makeObservable","_setClefsCallbacks","_applyClefsPolicies","makeCtrObservable","_setGroupsCallbacks","_applyGroupsPolicies","cuf","Policies","addCleanUpFunctionToCtr","ctr","setCallbacks","handleSelectItem","selectionParams","FacetPolicies","Inputs_items","Outputs_display","policies","mapDataToFacet","getm","Facets","installPolicies","Outputs_itemById","cleanUpCtr","inputs","setVoicing","observable","facet","voicingGroups","QuizStateProvider","createState","state","setClefs","updateState","reaction","fireImmediately","getDefaultProps","outputs","clefsDisplay","clefsHighlight","groupsHighlight","destroy","history","createBrowserHistory","UrlRouter","App","voicingStoreUsesSelectedClef","GroupsStore","ClefStore","clefSharp","clefFlat","setClefSharp","setClefFlat","modulate","PreselectionStore","Signal","dispatch","cScale","VoicingStore","clamp","nrOfVoices","AppStore","applyPolicies","StoreContext","createContext","StoreProvider","store","useContext","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.618bb7b2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { useStore } from 'src/app/components';\nimport { QuizFrameTopPanel } from 'src/quiz/components';\nimport './QuizFrame.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\nexport const QuizFrame: React.FC<PropsT> = observer((props: PropsT) => {\n  const appStore = useStore();\n\n  React.useEffect(() => {\n    function handleResize() {\n      appStore.setWindowWidth(window.innerWidth);\n    }\n\n    window.addEventListener('resize', handleResize);\n  });\n\n  return (\n    <div className={classnames('QuizFrame flex flex-col px-2')}>\n      <QuizFrameTopPanel />\n      <div\n        className={classnames(\n          'QuizFrame__MidSection flex flex-row justify-center'\n        )}\n      >\n        {props.children}\n      </div>\n    </div>\n  );\n});\n","import { isInteger } from 'lodash/fp';\n\nexport const mathMod = (m: number, p: number) => {\n  if (!isInteger(m)) {\n    return NaN;\n  }\n  if (!isInteger(p) || p < 1) {\n    return NaN;\n  }\n  return ((m % p) + p) % p;\n};\n","export const root = 0;\nexport const flat9 = 1;\nexport const ninth = 2;\nexport const sharp9 = 3;\nexport const flat3 = 3;\nexport const third = 4;\nexport const fourth = 5;\nexport const eleventh = 5;\nexport const sharp4 = 6;\nexport const sharp11 = 6;\nexport const flat5 = 6;\nexport const fifth = 7;\nexport const sharp5 = 8;\nexport const flat6 = 8;\nexport const flat13 = 8;\nexport const sixth = 9;\nexport const thirteenth = 9;\nexport const flat7 = 10;\nexport const seventh = 11;\n\nexport const noteNameByValue = {\n  '0': 'root',\n  '1': 'flat nine',\n  '2': 'nine',\n  '3': 'flat third',\n  '4': 'third',\n  '5': 'fourth/eleventh',\n  '6': 'tritone',\n  '7': 'fifth',\n  '8': 'flat thirteen',\n  '9': 'thirteenth',\n  '10': 'flat seven',\n  '11': 'seven',\n};\n\nexport const valueByNoteName = {\n  root: 0,\n  'flat nine': 1,\n  flat9: 1,\n  two: 2,\n  second: 2,\n  nine: 2,\n  ninth: 2,\n  'flat third': 3,\n  flat3: 3,\n  three: 4,\n  third: 4,\n  four: 5,\n  fourth: 5,\n  eleven: 5,\n  eleventh: 5,\n  sharp4: 6,\n  flat5: 6,\n  sharp11: 6,\n  'sharp fourth': 6,\n  'sharp eleventh': 6,\n  five: 7,\n  fifth: 7,\n  'flat thirteen': 8,\n  flat6: 8,\n  flat13: 8,\n  six: 9,\n  sixth: 9,\n  thirteen: 9,\n  thirteenth: 9,\n  flat7: 10,\n  'flat seven': 10,\n  seven: 11,\n  seventh: 11,\n};\n","import { includes } from 'lodash/fp';\nimport { mathMod } from 'src/utils/mathMod';\n\nexport const clefC = 'C';\nexport const clefCSharp = 'C#';\nexport const clefCFlat = 'Cb';\nexport const clefD = 'D';\nexport const clefDSharp = 'D#';\nexport const clefDFlat = 'Db';\nexport const clefE = 'E';\nexport const clefESharp = 'E#';\nexport const clefEFlat = 'Eb';\nexport const clefF = 'F';\nexport const clefFSharp = 'F#';\nexport const clefFFlat = 'Fb';\nexport const clefG = 'G';\nexport const clefGSharp = 'G#';\nexport const clefGFlat = 'Gb';\nexport const clefA = 'A';\nexport const clefASharp = 'A#';\nexport const clefAFlat = 'Ab';\nexport const clefB = 'B';\nexport const clefBSharp = 'B#';\nexport const clefBFlat = 'Bb';\n\nexport const clefs = [\n  'C',\n  'C#',\n  'D',\n  'Eb',\n  'E',\n  'F',\n  'F#',\n  'G',\n  'Ab',\n  'A',\n  'Bb',\n  'B',\n];\n\nexport const clefOffsets: { [key: string]: number } = {\n  [clefCFlat]: 11,\n  [clefC]: 0,\n  [clefCSharp]: 1,\n  [clefDFlat]: 1,\n  [clefD]: 2,\n  [clefDSharp]: 3,\n  [clefEFlat]: 3,\n  [clefE]: 4,\n  [clefESharp]: 5,\n  [clefFFlat]: 4,\n  [clefF]: 5,\n  [clefFSharp]: 6,\n  [clefGFlat]: 6,\n  [clefG]: 7,\n  [clefGSharp]: 8,\n  [clefAFlat]: 8,\n  [clefA]: 9,\n  [clefASharp]: 10,\n  [clefBFlat]: 10,\n  [clefB]: 11,\n  [clefBSharp]: 0,\n};\n\nexport const clefLetters = [clefC, clefD, clefE, clefF, clefG, clefA, clefB];\n\nexport const whiteKeyIndexes = [0, 2, 4, 5, 7, 9, 11];\nexport const blackKeyIndexes = [1, 3, 6, 8, 10];\n\nexport const isWhiteKeyIndex = (keyIndex: number) =>\n  includes(keyIndex, whiteKeyIndexes);\n\nexport const nrOfNotesInOctave = 12;\nexport const octaveRootNoteValue = (octaveIndex: number) =>\n  octaveIndex * nrOfNotesInOctave;\nexport const noteValueToIndex = (noteValue: number) =>\n  mathMod(noteValue, nrOfNotesInOctave);\n","import { QueryT } from 'src/quiz/types';\nimport { mathMod } from 'src/utils/mathMod';\nimport { noteNameByValue } from 'src/voicings/noteConstants';\nimport { noteValueToIndex, clefOffsets } from 'src/keyboard/keyConstants';\n\nexport const voicingTitleFromQuery = (query: QueryT) => {\n  const noteIndex = mathMod(query.inversion, query.voicing.chord.length);\n  const startNoteIdx = noteValueToIndex(query.voicing.chord[noteIndex]);\n  const startNoteName = (noteNameByValue as any)[startNoteIdx];\n\n  return `${query.clef} ${query.voicing.name} from ` + `${startNoteName}`;\n};\n","import { observer } from 'mobx-react-lite';\nimport 'src/keyboard/components/Keyboard.css';\nimport { voicingTitleFromQuery } from 'src/quiz/utils/voicingTitleFromQuery';\nimport { QueryT } from 'src/quiz/types';\n\nimport './VoicingTitle.scss';\n\ntype PropsT = {\n  query?: QueryT;\n  label?: string;\n};\n\nexport const VoicingTitle = observer((props: PropsT) => {\n  return (\n    <div className=\"VoicingTitle\">\n      {(props.label ?? '') +\n        (props.query ? voicingTitleFromQuery(props.query) : '')}\n    </div>\n  );\n});\n","import classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport {\n  GroupsFrameLeftPanel,\n  GroupsFrameTopPanel,\n} from 'src/groups/components';\nimport './GroupsFrame.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\nexport const GroupsFrame: React.FC<PropsT> = observer((props: PropsT) => {\n  return (\n    <div className={classnames('GroupsFrame flex flex-col')}>\n      <GroupsFrameTopPanel />\n      <div className={classnames('GroupsFrame__MidSection flex flex-row')}>\n        <GroupsFrameLeftPanel />\n        {props.children}\n      </div>\n    </div>\n  );\n});\n","import React from 'react';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport './GroupsFrameTopPanel.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\nexport const GroupsFrameTopPanel: React.FC<PropsT> = observer(() => {\n  return (\n    <div\n      className={classnames('GroupsFrameTopPanel')}\n    >\n    </div>\n  );\n});","import Select from 'react-select';\nimport CreatableSelect from 'react-select/creatable';\nimport { isNil } from 'lodash/fp';\nimport { observer } from 'mobx-react-lite';\n\nexport interface PickerValueT {\n  value: any;\n  label: string;\n  __isNew__?: boolean;\n}\n\ntype PropsT<ValueT> = {\n  isMulti: boolean;\n  isCreatable: boolean;\n  pickableValues: ValueT[];\n  pickableValue: ValueT;\n  labelFromValue: (value: any) => string;\n  [k: string]: any;\n};\n\nexport const ValuePicker = observer(\n  <ValueT, ConcretePropsT extends PropsT<ValueT>>(\n    props: ConcretePropsT\n  ): JSX.Element => {\n    const {\n      isMulti,\n      isCreatable,\n      pickableValue,\n      pickableValues,\n      labelFromValue,\n      ...others\n    } = props;\n\n    const toPickerValue = (pickableVal: any) => {\n      return pickableVal.__isNew__\n        ? pickableVal\n        : {\n            value: pickableVal,\n            label: labelFromValue(pickableVal),\n          };\n    };\n\n    const options = pickableValues.map(toPickerValue);\n\n    const pickerProps = {\n      isMulti: isMulti,\n      options,\n      value: isNil(pickableValue)\n        ? undefined\n        : isMulti\n        ? (pickableValue as any).map(toPickerValue)\n        : toPickerValue(pickableValue),\n      onKeyDown: (e: any) => {\n        if (others.onKeyDown) {\n          others.onKeyDown(e);\n        }\n      },\n      ...others,\n    };\n\n    const picker = isCreatable ? (\n      <CreatableSelect {...pickerProps} />\n    ) : (\n      <Select {...pickerProps} />\n    );\n\n    return <div style={{ zIndex: others.zIndex }}>{picker}</div>;\n  }\n);\n","import classnames from 'classnames';\nimport { action } from 'mobx';\nimport { observer } from 'mobx-react-lite';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport { Selection } from 'skandha-facets/Selection';\n\nimport { PickerValueT, ValuePicker } from 'src/utils/components/ValuePicker';\nimport { GroupT } from 'src/groups/types';\n\nimport './GroupPicker.scss';\n\ntype PropsT = {\n  className?: any;\n};\n\ntype DefaultPropsT = {\n  groups: GroupT[];\n  groupsSelection: Selection;\n};\n\nexport const GroupPicker: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  const onChange = action((value: PickerValueT) => {\n    const values: Array<any> = (value as any) ?? [];\n    props.groupsSelection.ids = values.map((x) => x.value.id);\n  });\n\n  return (\n    <div className={classnames('GroupPicker', props.className)}>\n      <ValuePicker\n        isMulti={true}\n        isCreatable={false}\n        pickableValues={props.groups}\n        labelFromValue={(x: any) => x.name}\n        pickableValue={props.groupsSelection.items}\n        onChange={onChange}\n      />\n    </div>\n  );\n});\n","import React from 'react';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport './GroupsFrameLeftPanel.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\nexport const GroupsFrameLeftPanel: React.FC<PropsT> = observer(() => {\n  return (\n    <div\n      className={classnames('GroupsFrameLeftPanel')}\n    >\n    </div>\n  );\n});","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\n\ntype EffectWithoutArgsPropsT = {\n  f: () => void;\n};\n\nexport const EffectWithoutArgs: (\n  props: EffectWithoutArgsPropsT\n) => React.ReactElement = observer(({ f }) => {\n  useDeepCompareEffect(() => {\n    const cleanUpFunction = f();\n    return cleanUpFunction;\n  }, [f]);\n  return <React.Fragment />;\n});\n","import { action } from \"mobx\";\n\nconst RESET = \"RESET\";\nconst UPDATING = \"UPDATING\";\nconst ERRORED = \"ERRORED\";\nconst UPDATED = \"UPDATED\";\nconst LOADING = \"LOADING\";\n\nexport type ResetRST = {\n  type: typeof RESET;\n};\n\nexport const resetRS = (): ResetRST => ({ type: RESET });\n\nexport const isResetRS = <UpdatingT>(rs: RST<UpdatingT>): rs is ResetRST =>\n  rs.type === RESET;\n\nexport type UpdatingRST<UpdatingT> = {\n  type: typeof UPDATING;\n  updating_state: UpdatingT;\n};\n\nexport const updatingRS = <UpdatingT>(\n  updating_state: UpdatingT\n): UpdatingRST<UpdatingT> => ({\n  type: UPDATING,\n  updating_state,\n});\n\nexport const isUpdatingRS = <UpdatingT>(\n  rs: RST<UpdatingT>\n): rs is UpdatingRST<UpdatingT> => rs.type === UPDATING;\n\nexport type ErroredRST = {\n  type: typeof ERRORED;\n  message: string;\n};\n\nexport const erroredRS = (message: string): ErroredRST => ({\n  type: ERRORED,\n  message,\n});\n\nexport const isErroredRS = <UpdatingT>(rs: RST<UpdatingT>): rs is ErroredRST =>\n  rs.type === ERRORED;\n\nexport type UpdatedRST = {\n  type: typeof UPDATED;\n};\n\nexport const updatedRS = (): UpdatedRST => ({\n  type: UPDATED,\n});\n\nexport const isUpdatedRS = <UpdatingT>(rs: RST<UpdatingT>): rs is UpdatedRST =>\n  rs.type === UPDATED;\n\nexport type LoadingT = {\n  type: typeof LOADING;\n};\n\nexport const loadingRS = (): UpdatingRST<LoadingT> =>\n  updatingRS({\n    type: LOADING,\n  });\n\nexport type RST<UpdatingT = LoadingT> =\n  | ResetRST\n  | UpdatingRST<UpdatingT>\n  | ErroredRST\n  | UpdatedRST;\n\nexport const updateRes = action(\n  (\n    rsMap: { [k: string]: any },\n    id: string,\n    update: Function,\n    then: Function,\n    getErrorMsg?: Function\n  ) => {\n    rsMap[id] = loadingRS();\n    return update()\n      .then(\n        action((result: any) => {\n          then(result);\n          rsMap[id] = updatedRS();\n        })\n      )\n      .catch(\n        action((e: any) => {\n          rsMap[id] = erroredRS(\n            getErrorMsg ? getErrorMsg(e) : `Could not load ${id}`\n          );\n        })\n      );\n  }\n);\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\n\nimport {\n  RST,\n  isResetRS,\n  isUpdatingRS,\n  isUpdatedRS,\n  isErroredRS,\n} from 'src/utils/RST';\n\ntype PropsT<UpdatingT> = {\n  rs: RST<UpdatingT>;\n  renderUpdated: () => JSX.Element;\n  renderUpdating?: (updating_state: UpdatingT) => JSX.Element;\n  renderErrored?: (message: string) => JSX.Element;\n};\n\n// TODO better default renders\nconst defaultRenderErrored = (message: string) => {\n  return <div>Error{message !== undefined && `: ${message}`}</div>;\n};\nconst defaultRenderUpdating = () => {\n  return <div>Loading...</div>;\n};\n\nexport const ResourceView = observer(\n  <UpdatingT,>(props: PropsT<UpdatingT>): JSX.Element => {\n    const renderErrored = props.renderErrored ?? defaultRenderErrored;\n    const renderUpdating = props.renderUpdating ?? defaultRenderUpdating;\n\n    const tryRenderUpdated = () => {\n      try {\n        const result = props.renderUpdated();\n        return result;\n      } catch (e) {\n        return renderErrored(e.message);\n      }\n    };\n\n    const catchAll = () => {\n      throw Error(`Received unrecognized resource state ${props.rs}`);\n    };\n\n    const renderReset = () => {\n      return <React.Fragment />;\n    };\n\n    return isUpdatedRS(props.rs)\n      ? tryRenderUpdated()\n      : isErroredRS(props.rs)\n      ? renderErrored(props.rs.message)\n      : isUpdatingRS(props.rs)\n      ? renderUpdating(props.rs.updating_state)\n      : isResetRS(props.rs)\n      ? renderReset()\n      : catchAll();\n  }\n);\n","import React from 'react';\n\nimport { EffectWithoutArgs } from 'src/utils/components';\nimport { useStore } from 'src/app/components';\n\ntype PropsT = {};\n\nexport const LoadGroupsEffect: React.FC<PropsT> = (p: PropsT) => {\n  const { groupsStore } = useStore();\n  return (\n    <EffectWithoutArgs\n      f={() => {\n        groupsStore.loadGroups();\n      }}\n    />\n  );\n};","import React from 'react';\n\nimport { EffectWithoutArgs } from 'src/utils/components';\n\ntype PropsT = {};\n\nexport const SelectGroupEffect: React.FC<PropsT> = (p: PropsT) => {\n  return (\n    <EffectWithoutArgs\n      f={() => {\n      }}\n    />\n  );\n};","import { observer } from 'mobx-react-lite';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { useStore } from 'src/app/components';\n\nexport const ClefModulationSelector = observer(({ children }) => {\n  const { preselectionStore } = useStore();\n\n  return (\n    <KeyboardEventHandler\n      handleKeys={['up', 'down']}\n      handleEventType=\"keydown\"\n      onKeyEvent={(key: string, e: any) => {\n        preselectionStore.setIsSharpening(key === 'up');\n        preselectionStore.setIsFlattening(key === 'down');\n      }}\n    >\n      <KeyboardEventHandler\n        handleKeys={['up', 'down']}\n        handleEventType=\"keyup\"\n        onKeyEvent={(key: string, e: any) => {\n          preselectionStore.reset();\n        }}\n      >\n        {children}\n      </KeyboardEventHandler>\n    </KeyboardEventHandler>\n  );\n});\n","import { observer } from 'mobx-react-lite';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { useStore } from 'src/app/components';\nimport { clefLetters } from 'src/keyboard/keyConstants';\n\nexport const ClefSelector = observer(({ children }) => {\n  const { preselectionStore } = useStore();\n\n  return (\n    <KeyboardEventHandler\n      handleKeys={clefLetters}\n      handleEventType=\"keydown\"\n      onKeyEvent={(key: string, e: any) => {\n        preselectionStore.setClefLetter(key);\n      }}\n    >\n      <KeyboardEventHandler\n        handleKeys={clefLetters}\n        handleEventType=\"keyup\"\n        onKeyEvent={(key: string, e: any) => {\n          preselectionStore.reset();\n        }}\n      >\n        {children}\n      </KeyboardEventHandler>\n    </KeyboardEventHandler>\n  );\n});\n","import { always, flow, map, range } from 'lodash/fp';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Rect } from 'react-konva';\n\ntype PropsT = {\n  offsetX: number;\n  offsetY: number;\n  height: number;\n  width: number;\n  fill: any;\n  backgroundColour: any;\n  isStriped: boolean;\n};\n\nexport const Marker: React.FC<PropsT> = observer((props: PropsT) => {\n  const filledStripeHeight = 5;\n  const bgStripeHeight = 3.5;\n  const nrOfStripes = Math.ceil(\n    props.height / (filledStripeHeight + bgStripeHeight)\n  );\n\n  return props.isStriped\n    ? (flow(\n        always(range(0, nrOfStripes)),\n        map((stripeIdx) => {\n          const y = stripeIdx * (filledStripeHeight + bgStripeHeight);\n          const height = Math.min(filledStripeHeight, props.height - y);\n\n          return (\n            <Rect\n              key={stripeIdx}\n              x={props.offsetX + 1}\n              y={props.offsetY + y}\n              fill={props.fill}\n              width={props.width - 2}\n              height={height}\n              strokeWidth={0}\n              opacity={1}\n            />\n          );\n        })\n      )() as any)\n    : ([\n        <Rect\n          key={0}\n          x={props.offsetX + 1}\n          y={props.offsetY}\n          fill={props.fill}\n          width={props.width - 2}\n          height={props.height}\n          strokeWidth={0}\n          opacity={1}\n        />,\n      ] as any);\n});\n","import { always, flow, indexOf, map, range } from 'lodash/fp';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Rect } from 'react-konva';\nimport { Marker } from 'src/keyboard/components/Marker';\nimport {\n  blackKeyIndexes,\n  isWhiteKeyIndex,\n  whiteKeyIndexes,\n} from 'src/keyboard/keyConstants';\n\nconst whiteKeyProps = {\n  width: 50,\n  height: 250,\n  fill: '#FFFFFF',\n  markerHeight: 56,\n};\n\nconst blackKeyProps = {\n  width: 25,\n  height: 160,\n  fill: '#444444',\n  markerHeight: 100,\n};\n\nconst whiteKeyX = flow(\n  always(range(0, 7)),\n  map((i) => i * whiteKeyProps.width)\n)();\n\nconst fraction = (x: number) => x * blackKeyProps.width;\nconst blackKeyX = [\n  whiteKeyX[1] - fraction(0.66),\n  whiteKeyX[2] - fraction(0.33),\n  whiteKeyX[4] - fraction(0.7),\n  whiteKeyX[5] - fraction(0.5),\n  whiteKeyX[6] - fraction(0.3),\n];\n\nconst getKeyX = (keyIndex: number) => {\n  const isWhiteKey = isWhiteKeyIndex(keyIndex);\n  const keyX = isWhiteKey ? whiteKeyX : blackKeyX;\n  const keyIndexes = isWhiteKey ? whiteKeyIndexes : blackKeyIndexes;\n  return keyX[indexOf(keyIndex, keyIndexes)];\n};\n\ntype PropsT = {\n  index: number;\n  octaveIndex: number;\n  markerColour?: string;\n  markerIsStriped: boolean;\n  scaleFactor: number;\n};\n\nexport const Key = observer((props: PropsT) => {\n  const isWhiteKey = isWhiteKeyIndex(props.index);\n  const keyProps = isWhiteKey ? whiteKeyProps : blackKeyProps;\n\n  const offsetY = 0;\n  const markerOffsetY = isWhiteKey ? 3 : 2;\n  const offsetX = props.octaveIndex * 7 * whiteKeyProps.width;\n\n  const x = offsetX + getKeyX(props.index);\n\n  return (\n    <React.Fragment>\n      <Rect\n        x={x * props.scaleFactor}\n        y={offsetY * props.scaleFactor}\n        fill={keyProps.fill}\n        stroke=\"#000000\"\n        opacity={1}\n        width={keyProps.width * props.scaleFactor}\n        height={keyProps.height * props.scaleFactor}\n      />\n      <Marker\n        offsetX={(x + 2) * props.scaleFactor}\n        offsetY={\n          (offsetY + keyProps.height - keyProps.markerHeight - markerOffsetY) *\n          props.scaleFactor\n        }\n        height={keyProps.markerHeight * props.scaleFactor}\n        width={(keyProps.width - 4) * props.scaleFactor}\n        fill={props.markerColour}\n        isStriped={props.markerIsStriped}\n        backgroundColour={keyProps.fill}\n      />\n    </React.Fragment>\n  );\n});\n","export const noteColours: { [key: number]: string } = {\n  0: '#aaaaaa',\n  1: '#fa9835-striped',\n  2: '#fa9835', // orange\n  3: '#40d530-striped',\n  4: '#40d530', // green\n  5: '#fee449', // yellow\n  6: '#f53311-striped',\n  7: '#f53311', // red\n  8: '#38baf2-striped',\n  9: '#38baf2', // blue\n  10: '#ff99ff-striped',\n  11: '#ff99ff', // violet\n};\n","import { includes, split } from 'lodash/fp';\n\nimport { noteColours } from 'src/keyboard/noteColours';\nimport { noteValueToIndex, clefOffsets } from 'src/keyboard/keyConstants';\nimport { ChordT, NoteT } from 'src/voicings/types';\n\nexport function noteValueToColour(\n  noteValue: NoteT,\n  clef: string,\n  chord: ChordT\n) {\n  const harmonicColour = includes(noteValue, chord)\n    ? noteColours[noteValueToIndex(noteValue - clefOffsets[clef])]\n    : undefined;\n\n  const isStriped = !!(harmonicColour && harmonicColour.endsWith('-striped'));\n  const colour = isStriped\n    ? split('-striped', harmonicColour)[0]\n    : harmonicColour;\n\n  return { colour, isStriped };\n}\n","import { add, always, concat, flow, map } from 'lodash/fp';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { Layer } from 'react-konva';\nimport { Key } from 'src/keyboard/components/Key';\nimport {\n  blackKeyIndexes,\n  noteValueToIndex,\n  octaveRootNoteValue,\n  whiteKeyIndexes,\n} from 'src/keyboard/keyConstants';\nimport { noteValueToColour } from 'src/keyboard/utils/noteValueToColour';\n\ntype PropsT = {\n  index: number;\n  clef: string;\n  chord: any;\n  scaleFactor: number;\n};\n\nexport const Octave = observer((props: PropsT) => {\n  const keyIndexes = concat(whiteKeyIndexes, blackKeyIndexes);\n  const keys = flow(\n    always(keyIndexes),\n    map(add(octaveRootNoteValue(props.index))),\n    map((noteValue) => {\n      const keyIndex = noteValueToIndex(noteValue);\n      const { colour, isStriped } = noteValueToColour(\n        noteValue,\n        props.clef,\n        props.chord\n      );\n      return (\n        <Key\n          key={noteValue}\n          index={keyIndex}\n          octaveIndex={props.index}\n          markerColour={colour}\n          markerIsStriped={isStriped}\n          scaleFactor={props.scaleFactor}\n        />\n      );\n    })\n  )();\n  return <Layer>{keys}</Layer>;\n});\n","import AudioSynth from 'audiosynth';\nimport { clefOffsets } from 'src/keyboard/keyConstants';\nimport { ClefT } from 'src/keyboard/types';\nimport { ChordT } from 'src/voicings/types';\n\nvar AudioContext = window.AudioContext || (window as any).webkitAudioContext;\n\nvar context = new AudioContext();\nvar synth = new AudioSynth(context);\n\nexport const playChord = (chord: ChordT, clef: ClefT) => {\n  chord.forEach((note, idx) =>\n    window.setTimeout(() => {\n      synth.playNote(note + 48, 0.5, 0.75, 0);\n    }, 200 + idx * 150)\n  );\n  synth.playNote(clefOffsets[clef] + 36, 1.0, 1.0, 0);\n};\n","import { useDefaultProps, FC } from 'react-default-props-context';\nimport { observer } from 'mobx-react-lite';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { useStore } from 'src/app/components';\nimport { playChord } from 'src/voicings/utils/playChord';\nimport { QuizState } from 'src/quiz/QuizState';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const InversionSelector: FC<PropsT, DefaultPropsT> = observer(\n  (p: PropsT) => {\n    const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n    const { voicingStore } = useStore();\n    return (\n      <KeyboardEventHandler\n        handleKeys={['ctrl+left', 'ctrl+right']}\n        onKeyEvent={(key: string, e: any) => {\n          if (key === 'ctrl+right') {\n            voicingStore.setInversion(voicingStore.inversion + 1);\n            if (props.quizState.query) {\n              props.quizState.query.inversion = voicingStore.inversion;\n            }\n          }\n          if (key === 'ctrl+left') {\n            voicingStore.setInversion(voicingStore.inversion - 1);\n            if (props.quizState.query) {\n              props.quizState.query.inversion = voicingStore.inversion;\n            }\n          }\n        }}\n      >\n        <KeyboardEventHandler\n          handleKeys={['p']}\n          onKeyEvent={(key: string, e: any) => {\n            playChord(voicingStore.chord, voicingStore.clef);\n          }}\n        >\n          {props.children}\n        </KeyboardEventHandler>\n      </KeyboardEventHandler>\n    );\n  }\n);\n","import { observer } from 'mobx-react-lite';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport { QuizState } from 'src/quiz/QuizState';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const RandomChordSelector: FC<PropsT, DefaultPropsT> = observer(\n  (p: PropsT) => {\n    const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n    return (\n      <KeyboardEventHandler\n        handleKeys={['space', 'enter']}\n        onKeyEvent={(key: string, e: any) => {\n          props.quizState.pickRandomChord();\n        }}\n      >\n        {props.children}\n      </KeyboardEventHandler>\n    );\n  }\n);\n","import { always, flow, map, range } from 'lodash/fp';\nimport { observer } from 'mobx-react-lite';\nimport { FC, useDefaultProps } from 'react-default-props-context';\nimport { Stage } from 'react-konva';\nimport { useStore } from 'src/app/components';\nimport { ClefModulationSelector } from 'src/keyboard/components/ClefModulationSelector';\nimport { ClefSelector } from 'src/keyboard/components/ClefSelector';\nimport 'src/keyboard/components/Keyboard.css';\nimport { Octave } from 'src/keyboard/components/Octave';\nimport { InversionSelector } from 'src/voicings/components/InversionSelector';\nimport { RandomChordSelector } from 'src/voicings/components/RandomChordSelector';\n\ntype PropsT = {\n  onClick: (event: any) => void;\n};\n\ntype DefaultPropsT = {};\n\nexport const Keyboard: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  const { voicingStore, clefStore, scaleFactor } = useStore();\n\n  const octaves = flow(\n    always(range(0, 4)),\n    map((i) => (\n      <Octave\n        key={i}\n        index={i}\n        clef={clefStore.clef}\n        chord={voicingStore.chord}\n        scaleFactor={scaleFactor}\n      />\n    ))\n  )();\n\n  return (\n    <div className=\"Keyboard__frame\">\n      <RandomChordSelector>\n        <ClefSelector>\n          <ClefModulationSelector>\n            <InversionSelector>\n              <div\n                className=\"absolute w-full z-50\"\n                style={{ height: 250 * scaleFactor }}\n                onClick={props.onClick}\n              />\n              <div tabIndex={0}>\n                <Stage width={1400 * scaleFactor} height={250 * scaleFactor}>\n                  {octaves}\n                </Stage>\n              </div>\n            </InversionSelector>\n          </ClefModulationSelector>\n        </ClefSelector>\n      </RandomChordSelector>\n    </div>\n  );\n});\n","import classnames from 'classnames';\nimport { always, flow, map } from 'lodash/fp';\nimport { observer } from 'mobx-react-lite';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport { ClefListViewItem } from 'src/keyboard/components';\nimport { ClefT } from 'src/keyboard/types';\nimport { Selection } from 'skandha-facets/Selection';\n\nimport './ClefListView.scss';\n\ntype PropsT = {\n  className?: any;\n};\n\ntype DefaultPropsT = {\n  clefs: ClefT[];\n  clefsSelection: Selection;\n};\n\nexport const ClefListView: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  const clefDivs = flow(\n    always(props.clefs),\n    map((x) => (\n      <ClefListViewItem\n        key={x}\n        clef={x}\n        className={classnames({\n          'ClefListViewItem--selected': props.clefsSelection.ids.includes(x),\n        })}\n        onMouseDown={(e: any) => {\n          props.clefsSelection.selectItem({\n            itemId: x,\n            isShift: false,\n            isCtrl: true,\n          });\n        }}\n      />\n    ))\n  )();\n\n  const noItems = <h2>There are no clefs</h2>;\n\n  return (\n    <div\n      className={classnames(\n        'ClefListView flex flex-row w-full',\n        props.className\n      )}\n    >\n      {clefDivs.length && clefDivs}\n      {!clefDivs.length && noItems}\n    </div>\n  );\n});\n","import React from 'react';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { ClefT } from 'src/keyboard/types';\n\nimport './ClefListViewItem.scss';\n\nexport type PropsT = {\n  clef: ClefT;\n  onMouseDown: (event: any) => void;\n  className?: any;\n};\n\nexport const ClefListViewItem: React.FC<PropsT> = observer((props: PropsT) => {\n  return (\n    <div\n      className={classnames('ClefListViewItem flex-1', props.className)}\n      onMouseDown={props.onMouseDown}\n    >\n      {props.clef}\n    </div>\n  );\n});\n","import { valueByNoteName } from 'src/voicings/noteConstants';\nimport { map } from 'lodash/fp';\n\nexport const parseVoicing = (data: any) => {\n  const voicing = {\n    ...data,\n    id: data.name,\n    chord: map((x: string) => {\n      const noteValue = (valueByNoteName as any)[x as any];\n      if (noteValue === undefined) {\n        console.log(`Error: unknown note ${x}`);\n      }\n      return noteValue;\n    }, data['chord']),\n  };\n\n  for (let i = 1; i < voicing.chord.length; ++i) {\n    while (voicing.chord[i] <= voicing.chord[i - 1]) {\n      voicing.chord[i] += 12;\n    }\n  }\n\n  return voicing;\n};\n\nconst parseVoicingGroup = (data: any) => {\n  return {\n    ...data,\n    id: data.name,\n    voicings: map(parseVoicing, data['voicings']),\n  };\n};\n\nexport const cache = {\n  data: null,\n};\n\nexport const parseVoicingGroups = (data: any) => {\n  cache.data = data;\n  return map(parseVoicingGroup, data);\n};\n","import { observer } from 'mobx-react-lite';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport Dropdown, { MenuItem } from '@trendmicro/react-dropdown';\nimport { QuizState } from 'src/quiz/QuizState';\nimport { cache, parseVoicingGroups } from 'src/voicings/parse';\n\nimport '@trendmicro/react-buttons/dist/react-buttons.css';\nimport '@trendmicro/react-dropdown/dist/react-dropdown.css';\n\nimport './IoMenu.scss';\n\nconst twitterUrl = `https://twitter.com/intent/tweet?url=https://mnieber.github.io/brainpiano&hashtags=BrainPiano`;\n\ntype PropsT = {};\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const IoMenu: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  return (\n    <Dropdown\n      onSelect={(eventKey: any) => {\n        if (eventKey === 1) {\n          navigator.clipboard.writeText(JSON.stringify(cache.data, null, 2));\n        }\n        if (eventKey === 2) {\n          window.open(twitterUrl);\n        }\n        if (eventKey === 3) {\n          navigator.clipboard.readText().then((clipText) => {\n            debugger;\n            props.quizState.setGroups(parseVoicingGroups(JSON.parse(clipText)));\n          });\n        }\n      }}\n      autoOpen={true}\n      pullRight={true}\n    >\n      <Dropdown.Toggle btnSize=\"lg\" btnStyle=\"flat\">\n        IO\n      </Dropdown.Toggle>\n      <Dropdown.Menu>\n        <MenuItem eventKey={1}>Export</MenuItem>\n        <MenuItem divider />\n        <MenuItem eventKey={2}>Tweet</MenuItem>\n        <MenuItem divider />\n        <MenuItem eventKey={3}>Import</MenuItem>\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n});\n","import React from 'react';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { VoicingTitle } from 'src/voicings/components/VoicingTitle';\nimport { GroupPicker } from 'src/groups/components';\nimport { ClefListView } from 'src/keyboard/components';\nimport { QuizState } from 'src/quiz/QuizState';\nimport { IoMenu } from 'src/io/components';\n\nimport './QuizFrameTopPanel.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const QuizFrameTopPanel: FC<PropsT, DefaultPropsT> = observer(\n  (p: PropsT) => {\n    const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n    const HelpButton = (\n      <button\n        onClick={() =>\n          window.open('https://github.com/mnieber/brainpiano#brainpiano')\n        }\n      >\n        Help\n      </button>\n    );\n\n    return (\n      <div className={classnames('QuizFrameTopPanel mb-4')}>\n        <div className=\"QuizFrameTopPanel__firstRow mb4 flex flex-row justify-between\">\n          <VoicingTitle query={props.quizState.query} />\n          {HelpButton}\n          <VoicingTitle\n            label={\n              props.quizState.nextQuery ? 'Next: ' : 'Welcome to BrainPiano!'\n            }\n            query={props.quizState.nextQuery}\n          />\n        </div>\n        <GroupPicker className=\"flex-1\" />\n        <div className=\"flex flex-row justify-between mt-2\">\n          <ClefListView />\n          <IoMenu />\n        </div>\n      </div>\n    );\n  }\n);\n","import React from 'react';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport { observer } from 'mobx-react-lite';\nimport { Keyboard } from 'src/keyboard/components/Keyboard';\nimport { QuizFrame } from 'src/quiz/components';\nimport { QuizState } from 'src/quiz/QuizState';\n\ntype PropsT = {};\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const QuizView: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  const onClick = React.useMemo(() => () => props.quizState.pickRandomChord(), [\n    props.quizState,\n  ]);\n  return (\n    <QuizFrame>\n      <Keyboard onClick={onClick} />\n    </QuizFrame>\n  );\n});\n","export function listToItemById(qsList: Array<any>, key: string = 'id') {\n  const result: any = {};\n  qsList.forEach((item) => {\n    result[item[key]] = item;\n  });\n  return result;\n}\n\nexport function getIds(x: Array<any>): Array<string> {\n  return x.map((x) => x.id);\n}\n","import { EventT } from 'src/utils/types';\nimport { QuizState } from 'src/quiz/QuizState';\n\nexport const selectClefBasedOnPreselection = () => (quizState: QuizState) => {\n  const handler = (event: EventT) => {\n    if (quizState.query && event.topic === 'PreselectionStore.selectClef') {\n      quizState.query.clef =\n        event.details.clefLetter +\n        (event.details.isSharpening\n          ? '#'\n          : event.details.isFlattening\n          ? 'b'\n          : '');\n      quizState.props.clefStore.setClef(quizState.query.clef);\n    }\n  };\n\n  quizState.props.preselectionStore.signal.add(handler as any);\n  return () => quizState.props.preselectionStore.signal.remove(handler);\n};\n","import { size } from 'lodash/fp';\n\nexport const randomElement = (items: Array<any>) =>\n  items[Math.floor(Math.random() * size(items))];\n","import {\n  always,\n  concat,\n  size,\n  flow,\n  times,\n  constant,\n  take,\n  takeRight,\n} from 'lodash/fp';\nimport { ChordT } from 'src/voicings/types';\n\nexport const invertChord = (chord: ChordT, pos: number) => {\n  function rotate(arr: ChordT) {\n    const maxNote = arr[arr.length - 1];\n    let first = take(1, arr);\n    const last = takeRight(size(arr) - 1, arr);\n    while (first[0] <= maxNote) {\n      first[0] += 12;\n    }\n    return concat(last, first);\n  }\n\n  function rotateBack(arr: ChordT) {\n    const minNote = arr[0];\n    let last = takeRight(1, arr);\n    const first = take(size(arr) - 1, arr);\n    while (last[0] >= minNote) {\n      last[0] -= 12;\n    }\n    return concat(last, first);\n  }\n\n  const result =\n    pos === 0\n      ? chord\n      : pos > 0\n      ? flow(always(chord), ...times(constant(rotate), pos))()\n      : flow(always(chord), ...times(constant(rotateBack), Math.abs(pos)))();\n  return result;\n};\n\nexport const getInversionRange = (chord: ChordT) => {\n  const topC = 48;\n  let minInversion = 0;\n  let maxInversion = 0;\n  const l = chord.length;\n\n  while (invertChord(chord, maxInversion + 1)[l - 1] < topC) {\n    maxInversion += 1;\n  }\n\n  while (invertChord(chord, minInversion - 1)[0] >= 0) {\n    minInversion -= 1;\n  }\n\n  return [minInversion, maxInversion];\n};\n","import { add, always, map, flow } from 'lodash/fp';\n\nimport { octaveRootNoteValue, clefOffsets } from 'src/keyboard/keyConstants';\nimport { VoicingT } from 'src/voicings/types';\n\nexport const voicingToChord = (\n  voicing: VoicingT,\n  clef: string,\n  octaveIndex: number\n) => {\n  let rootNoteValue = octaveRootNoteValue(octaveIndex);\n  const keyOffset = clefOffsets[clef];\n\n  const result = flow(\n    //\n    always(voicing.chord),\n    map(add(rootNoteValue + keyOffset))\n  )();\n  return result;\n};\n","import { range, sumBy } from 'lodash/fp';\nimport { randomElement } from 'src/utils/random';\nimport { ClefT } from 'src/keyboard/types';\nimport { GroupT } from 'src/groups/types';\nimport { VoicingT } from 'src/voicings/types';\nimport { getInversionRange } from 'src/voicings/utils/invertChord';\nimport { QueryT } from 'src/quiz/types';\nimport { voicingToChord } from 'src/voicings/utils/voicingToChord';\nimport { mathMod } from 'src/utils/mathMod';\n\nconst getRandomInversion = (voicing: VoicingT, clef: ClefT) => {\n  const L = voicing.chord.length;\n\n  const [minInversion, maxInversion] = getInversionRange(\n    voicingToChord(voicing, clef, 1)\n  );\n  const inversionRange = range(minInversion, maxInversion + 1).filter((x) => {\n    return !voicing.inversions || voicing.inversions[mathMod(x, L)] !== false;\n  });\n  if (inversionRange.length === 0) {\n    return 0;\n  }\n  let inversion = randomElement(inversionRange);\n\n  // Try to bring inversion closer to zero using steps of voicing.chord.length inversions\n  // (which means its the same inversion, just at a different place on the keyboard)\n  while (\n    inversion + L <= maxInversion &&\n    Math.abs(inversion) > Math.abs(inversion + L)\n  ) {\n    inversion += L;\n  }\n  while (\n    inversion - L >= minInversion &&\n    Math.abs(inversion) > Math.abs(inversion - L)\n  ) {\n    inversion -= L;\n  }\n  return inversion;\n};\n\nexport const createQuery = (clefs: ClefT[], groups: GroupT[]): QueryT => {\n  const clef = randomElement(clefs);\n  const nrVoicings = sumBy((x: GroupT) => x.voicings.length)(groups);\n  const voicingIdx = Math.floor(Math.random() * nrVoicings);\n\n  let groupIdx = 0;\n  let count = groups[0].voicings.length;\n  while (voicingIdx >= count) {\n    groupIdx += 1;\n    count += groups[groupIdx].voicings.length;\n  }\n\n  const group = groups[groupIdx];\n  const voicing = group.voicings[voicingIdx - (count - group.voicings.length)];\n  const inversion = getRandomInversion(voicing, clef);\n\n  return {\n    clef,\n    group,\n    voicing,\n    inversion,\n  };\n};\n","import { ClefT } from 'src/keyboard/types';\nimport { GroupT } from 'src/groups/types';\nimport { input } from 'skandha';\n\nexport class Inputs {\n  @input groups: Array<GroupT> = [];\n  @input clefs: Array<ClefT> = [];\n}\n","import { computed } from 'mobx';\nimport { GroupT, GroupByIdT } from 'src/groups/types';\nimport { listToItemById } from 'src/utils/ids';\nimport { output } from 'skandha';\nimport { ClefT } from 'src/keyboard/types';\n\nexport class Outputs {\n  @output clefsDisplay: Array<ClefT> = [];\n  @output groupsDisplay: Array<GroupT> = [];\n\n  @computed get groupById(): GroupByIdT {\n    return listToItemById(this.groupsDisplay);\n  }\n}\n","import { setCallbacks } from 'aspiration';\nimport { action, observable, makeObservable } from 'mobx';\nimport {\n  addCleanUpFunctionToCtr,\n  facet,\n  getm,\n  cleanUpCtr,\n  mapDataToFacet,\n  installPolicies,\n  registerFacets,\n  ClassMemberT as CMT,\n} from 'skandha';\nimport { makeCtrObservable } from 'skandha-mobx';\nimport { getIds } from 'src/utils/ids';\nimport * as Facets from 'skandha-facets';\nimport * as Policies from 'src/quiz/QuizState/policies';\nimport * as FacetPolicies from 'skandha-facets/policies';\nimport {\n  Selection,\n  SelectionCbs,\n  handleSelectItem,\n} from 'skandha-facets/Selection';\nimport { Highlight, HighlightCbs } from 'skandha-facets/Highlight';\nimport { createQuery } from 'src/quiz/utils/createQuery';\nimport { PreselectionStore } from 'src/keyboard/PreselectionStore';\n\nimport { QueryT } from 'src/quiz/types';\nimport { GroupsStore } from 'src/groups/GroupsStore';\nimport { VoicingStore } from 'src/voicings/VoicingStore';\nimport { ClefStore } from 'src/keyboard/ClefStore';\nimport { Inputs } from 'src/quiz/QuizState/facets/Inputs';\nimport { Outputs } from 'src/quiz/QuizState/facets/Outputs';\nimport { ClefT } from 'src/keyboard/types';\nimport { GroupT } from 'src/groups/types';\n\ntype PropsT = {\n  clefStore: ClefStore;\n  groupsStore: GroupsStore;\n  voicingStore: VoicingStore;\n  preselectionStore: PreselectionStore;\n};\n\nexport class QuizState {\n  props: PropsT;\n  @observable query?: QueryT;\n  @observable nextQuery?: QueryT;\n\n  @facet inputs = new Inputs();\n  @facet outputs = new Outputs();\n\n  clefs = {\n    selection: new Selection(),\n    highlight: new Highlight(),\n  };\n  groups = {\n    selection: new Selection(),\n    highlight: new Highlight(),\n  };\n\n  _setClefsCallbacks(props: PropsT) {\n    const ctr = this.clefs;\n    setCallbacks(ctr.selection, {\n      selectItem: {\n        selectItem(this: SelectionCbs['selectItem']) {\n          handleSelectItem(ctr.selection, this.selectionParams);\n          FacetPolicies.highlightFollowsSelection(\n            ctr.selection,\n            this.selectionParams\n          );\n        },\n      },\n    } as SelectionCbs);\n    setCallbacks(ctr.highlight, {} as HighlightCbs);\n  }\n\n  _setGroupsCallbacks(props: PropsT) {\n    const ctr = this.groups;\n    setCallbacks(ctr.selection, {\n      selectItem: {\n        selectItem(this: SelectionCbs['selectItem']) {\n          handleSelectItem(ctr.selection, this.selectionParams);\n          FacetPolicies.highlightFollowsSelection(\n            ctr.selection,\n            this.selectionParams\n          );\n        },\n      },\n    } as SelectionCbs);\n    setCallbacks(ctr.highlight, {} as HighlightCbs);\n  }\n\n  _applyClefsPolicies(props: PropsT) {\n    const Inputs_items = [Inputs, 'clefs', this] as CMT;\n    const Outputs_display = [Outputs, 'clefsDisplay', this] as CMT;\n\n    const policies = [\n      mapDataToFacet(Outputs_display, getm(Inputs_items)),\n      // selection\n      Facets.selectionUsesSelectableIds(getm(Outputs_display)),\n    ];\n\n    installPolicies(policies, this.clefs);\n  }\n\n  _applyGroupsPolicies(props: PropsT) {\n    const Inputs_items = [Inputs, 'groups', this] as CMT;\n    const Outputs_display = [Outputs, 'groupsDisplay', this] as CMT;\n    const Outputs_itemById = [Outputs, 'groupById', this] as CMT;\n\n    const policies = [\n      mapDataToFacet(Outputs_display, getm(Inputs_items)),\n      // selection\n      Facets.selectionUsesSelectableIds(getm(Outputs_display), getIds),\n      Facets.selectionUsesItemLookUpTable(getm(Outputs_itemById)),\n      // highlight\n      Facets.highlightUsesItemLookUpTable(getm(Outputs_itemById)),\n    ];\n\n    installPolicies(policies, this.groups);\n  }\n\n  destroy() {\n    cleanUpCtr(this.clefs);\n    cleanUpCtr(this.groups);\n  }\n\n  constructor(props: PropsT) {\n    this.props = props;\n\n    registerFacets(this, {});\n    makeObservable(this);\n\n    registerFacets(this.clefs, { name: 'Clefs' });\n    this._setClefsCallbacks(props);\n    this._applyClefsPolicies(props);\n    makeCtrObservable(this.clefs);\n\n    registerFacets(this.groups, { name: 'Groups' });\n    this._setGroupsCallbacks(props);\n    this._applyGroupsPolicies(props);\n    makeCtrObservable(this.groups);\n\n    const cuf = Policies.selectClefBasedOnPreselection()(this);\n    addCleanUpFunctionToCtr(this.clefs, cuf);\n  }\n\n  @action setClefs(clefs: ClefT[]) {\n    this.inputs.clefs = clefs;\n    this.clefs.selection.ids = clefs;\n  }\n\n  @action setGroups(groups: GroupT[]) {\n    this.inputs.groups = groups;\n    this.groups.selection.ids = getIds(groups);\n  }\n\n  @action pickRandomChord() {\n    this.query =\n      this.nextQuery ??\n      createQuery(this.clefs.selection.ids, this.groups.selection.items ?? []);\n\n    this.nextQuery = createQuery(\n      this.clefs.selection.ids,\n      this.groups.selection.items ?? []\n    );\n\n    if (this.query) {\n      this.props.clefStore.setClef(this.query.clef);\n      this.props.voicingStore.setVoicing(this.query.voicing);\n      this.props.voicingStore.setInversion(this.query.inversion);\n    }\n  }\n}\n","export const voicingGroups = [\n  {\n    name: 'minor',\n    voicings: [\n      {\n        name: 'Min6,9',\n        chord: ['ninth', 'flat3', 'fifth', 'thirteenth'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'Min7,9',\n        chord: ['ninth', 'flat3', 'fifth', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'ø9',\n        chord: ['ninth', 'flat3', 'flat5', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'MinMaj9',\n        chord: ['ninth', 'flat3', 'fifth', 'seventh'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'Min6',\n        chord: ['flat3', 'fifth', 'thirteenth'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'Min7',\n        chord: ['flat3', 'fifth', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'ø',\n        chord: ['flat3', 'flat5', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'Min',\n        chord: ['flat3', 'fifth'],\n        inversions: [true, true],\n      },\n      {\n        name: 'MinMaj',\n        chord: ['flat3', 'fifth', 'seventh'],\n        inversions: [true, true, true],\n      },\n    ],\n  },\n  {\n    name: 'fourths',\n    voicings: [\n      {\n        name: 'SoWhat',\n        chord: ['root', 'fourth', 'flat7', 'flat3', 'fifth'],\n        inversions: [false, true, false, false, false, false],\n      },\n    ],\n  },\n  {\n    name: 'major',\n    voicings: [\n      {\n        name: 'Maj6,9',\n        chord: ['ninth', 'third', 'sixth'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'Maj7,9',\n        chord: ['ninth', 'third', 'fifth', 'seventh'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'Maj6',\n        chord: ['third', 'sixth'],\n        inversions: [true, true],\n      },\n      {\n        name: 'Maj7',\n        chord: ['third', 'fifth', 'seventh'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'Maj',\n        chord: ['third', 'fifth'],\n        inversions: [true, true],\n      },\n    ],\n  },\n  {\n    name: 'dominant',\n    voicings: [\n      {\n        name: '7,13',\n        chord: ['third', 'thirteenth', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: '7,9',\n        chord: ['ninth', 'third', 'fifth', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b13',\n        chord: ['third', 'flat13', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: '7,9,b13',\n        chord: ['ninth', 'third', 'flat13', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b5',\n        chord: ['third', 'flat5', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: '7,b5,b13',\n        chord: ['third', 'flat5', 'flat13', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b9',\n        chord: ['flat9', 'third', 'fifth', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b9,13',\n        chord: ['flat9', 'third', 'thirteenth', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b9,b13',\n        chord: ['flat9', 'third', 'flat13', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7',\n        chord: ['third', 'fifth', 'flat7'],\n        inversions: [true, true, true],\n      },\n    ],\n  },\n  {\n    name: 'magic-dom',\n    voicings: [\n      {\n        name: 'magic dom root',\n        chord: ['third', 'flat7', 'ninth', 'fifth', 'root'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 2nd',\n        chord: ['fifth', 'root', 'fourth', 'flat7', 'ninth'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 3rd',\n        chord: ['flat7', 'ninth', 'five', 'root', 'third'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 5th',\n        chord: ['flat7', 'third', 'thirteen', 'second', 'fifth'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 6th',\n        chord: ['root', 'fourth', 'flat7', 'third', 'thirteen'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 7th',\n        chord: ['ninth', 'five', 'root', 'fourth', 'flat7'],\n        inversions: [true, false, false, false, false],\n      },\n    ],\n  },\n];\n","import * as React from 'react';\nimport { action, reaction } from 'mobx';\n\nimport { QuizState } from 'src/quiz/QuizState';\nimport { CtrProvider } from 'react-default-props-context';\nimport { useStore } from 'src/app/components';\nimport { voicingGroups } from 'src/voicings/voicingGroups';\nimport { clefs } from 'src/keyboard/keyConstants';\nimport { parseVoicingGroups } from 'src/voicings/parse';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\n// Note: don't observe this with MobX\nexport const QuizStateProvider: React.FC<PropsT> = (props: PropsT) => {\n  const {\n    groupsStore,\n    clefStore,\n    voicingStore,\n    preselectionStore,\n  } = useStore();\n  const groups = parseVoicingGroups(voicingGroups);\n\n  const createState = action(() => {\n    const state = new QuizState({\n      groupsStore,\n      clefStore,\n      voicingStore,\n      preselectionStore,\n    });\n    state.setClefs(clefs);\n    state.setGroups(groups);\n    return state;\n  });\n\n  const updateState = (state: QuizState) => {\n    reaction(\n      () => ({}),\n      (inputs) => {},\n      {\n        fireImmediately: true,\n      }\n    );\n  };\n\n  const getDefaultProps = (state: QuizState) => {\n    return {\n      quizState: () => state,\n      clefs: () => state.outputs.clefsDisplay,\n      clefsSelection: () => state.clefs.selection,\n      clefsHighlight: () => state.clefs.highlight,\n      clef: () => state.clefs.highlight.item,\n      groups: () => state.outputs.groupsDisplay,\n      groupsSelection: () => state.groups.selection,\n      groupsHighlight: () => state.groups.highlight,\n      group: () => state.groups.highlight.item,\n    };\n  };\n\n  return (\n    <CtrProvider\n      createCtr={createState}\n      updateCtr={updateState}\n      destroyCtr={(state: QuizState) => state.destroy()}\n      getDefaultProps={getDefaultProps}\n    >\n      {props.children}\n    </CtrProvider>\n  );\n};\n","import React from 'react';\nimport { Router, Switch, Route } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { createBrowserHistory } from 'history';\nimport { QuizView } from 'src/quiz/components';\nimport { QuizStateProvider } from 'src/quiz/components';\n\ntype PropsT = {};\n\nexport const history = createBrowserHistory();\n\nexport const UrlRouter: React.FC<PropsT> = observer((props: PropsT) => {\n  return (\n    <Router history={history}>\n      <Switch>\n        <Route path=\"\">\n          <QuizStateProvider>\n            <QuizView />\n          </QuizStateProvider>\n        </Route>\n      </Switch>\n    </Router>\n  );\n});\n","import { UrlRouter } from 'src/app/components/UrlRouter';\nimport './App.scss';\n\nexport function App() {\n  return (\n    <div className=\"App w-screen\">\n      <UrlRouter />\n    </div>\n  );\n}\n","import { reaction } from 'mobx';\nimport { AppStore } from 'src/app/AppStore';\n\nexport const voicingStoreUsesSelectedClef = () => (appStore: AppStore) => {\n  reaction(\n    () => appStore.clefStore.clef,\n    (clef) => {\n      appStore.voicingStore.clef = clef;\n    },\n    { fireImmediately: true }\n  );\n};\n","import { GroupByIdT } from 'src/groups/types';\nimport { observable, makeObservable } from 'mobx';\n\nexport class GroupsStore {\n  @observable groupById: GroupByIdT = {};\n\n  constructor() {\n    makeObservable(this);\n  }\n\n  loadGroups() {}\n}\n","import { action, computed, makeObservable, observable } from 'mobx';\n\nimport { clefC } from 'src/keyboard/keyConstants';\nimport { ClefT } from 'src/keyboard/types';\n\nexport class ClefStore {\n  clefLetter = clefC;\n  clefSharp = false;\n  clefFlat = false;\n\n  constructor() {\n    makeObservable(this, {\n      clefLetter: observable,\n      clefSharp: observable,\n      clefFlat: observable,\n      setClefLetter: action,\n      setClefSharp: action,\n      setClefFlat: action,\n      clef: computed,\n    });\n  }\n\n  setClefLetter = (clefLetter: string) => {\n    this.clefLetter = clefLetter;\n  };\n\n  setClefSharp = (x: boolean) => {\n    this.clefSharp = x;\n    if (x) this.clefFlat = false;\n  };\n\n  setClefFlat = (x: boolean) => {\n    this.clefFlat = x;\n    if (x) this.clefSharp = false;\n  };\n\n  get clef() {\n    return this.clefLetter + (this.clefSharp ? '#' : this.clefFlat ? 'b' : '');\n  }\n\n  setClef(x: ClefT) {\n    const clefLetter = x[0];\n    this.setClefLetter(clefLetter);\n    const modulate = x[1];\n    this.setClefFlat(modulate == 'b');\n    this.setClefSharp(modulate == '#');\n  }\n}\n","import { makeObservable, observable, action } from 'mobx';\nimport { Signal } from 'micro-signals';\n\nexport class PreselectionStore {\n  signal = new Signal();\n  clefLetter?: string = undefined;\n  isSharpening?: boolean = undefined;\n  isFlattening?: boolean = undefined;\n\n  constructor() {\n    makeObservable(this, {\n      clefLetter: observable,\n      isSharpening: observable,\n      isFlattening: observable,\n      setClefLetter: action,\n      setIsSharpening: action,\n      setIsFlattening: action,\n      reset: action,\n    });\n  }\n\n  setClefLetter = (x?: string) => (this.clefLetter = x);\n  setIsSharpening = (x?: boolean) => (this.isSharpening = x);\n  setIsFlattening = (x?: boolean) => (this.isFlattening = x);\n\n  reset = () => {\n    if (this.clefLetter) {\n      this.signal.dispatch({\n        topic: 'PreselectionStore.selectClef',\n        details: {\n          clefLetter: this.clefLetter,\n          isSharpening: this.isSharpening,\n          isFlattening: this.isFlattening,\n        },\n      });\n    }\n    this.setIsFlattening(false);\n    this.setIsSharpening(false);\n    this.setClefLetter(undefined);\n  };\n}\n","import { clamp, size } from 'lodash/fp';\nimport { action, computed, makeObservable, observable } from 'mobx';\nimport { invertChord } from 'src/voicings/utils/invertChord';\nimport { voicingToChord } from 'src/voicings/utils/voicingToChord';\nimport { VoicingT } from 'src/voicings/types';\nimport { getInversionRange } from 'src/voicings/utils/invertChord';\nimport { parseVoicing } from 'src/voicings/parse';\n\nconst cScale = parseVoicing({\n  id: 'Chromatic',\n  name: 'Chromatic',\n  chord: [\n    'root',\n    'flat9',\n    'ninth',\n    'flat3',\n    'third',\n    'fourth',\n    'flat5',\n    'fifth',\n    'flat6',\n    'sixth',\n    'flat7',\n    'seventh',\n  ],\n});\n\nexport class VoicingStore {\n  clef: string = 'C';\n  inversion: number = 0;\n  voicing: VoicingT = cScale;\n\n  constructor() {\n    makeObservable(this, {\n      clef: observable,\n      inversion: observable,\n      voicing: observable,\n      chord: computed,\n      nrOfVoices: computed,\n      inversionRange: computed,\n      setInversion: action,\n      setVoicing: action,\n    });\n  }\n\n  setInversion = (x: number) => {\n    this.inversion = clamp(\n      this.inversionRange[0],\n      this.inversionRange[1]\n    )(x) as any;\n  };\n\n  setVoicing = (voicing: VoicingT) => {\n    this.voicing = voicing;\n  };\n\n  get inversionRange() {\n    return getInversionRange(voicingToChord(this.voicing, this.clef, 1));\n  }\n\n  get nrOfVoices() {\n    return size(this.voicing.chord);\n  }\n\n  get chord() {\n    return this.clef\n      ? invertChord(voicingToChord(this.voicing, this.clef, 1), this.inversion)\n      : undefined;\n  }\n}\n","import { makeObservable, observable } from 'mobx';\nimport * as Policies from 'src/app/AppStore/policies';\nimport { GroupsStore } from 'src/groups/GroupsStore';\nimport { ClefStore } from 'src/keyboard/ClefStore';\nimport { PreselectionStore } from 'src/keyboard/PreselectionStore';\nimport { VoicingStore } from 'src/voicings/VoicingStore';\n\nexport class AppStore {\n  clefStore = new ClefStore();\n  groupsStore: GroupsStore;\n  preselectionStore = new PreselectionStore();\n  scaleFactor = 1;\n  voicingStore = new VoicingStore();\n\n  setWindowWidth(width: number) {\n    this.scaleFactor = width >= 1420 ? 1 : width / 1420;\n  }\n\n  constructor() {\n    this.setWindowWidth(window.innerWidth);\n\n    makeObservable(this, {\n      clefStore: observable,\n      groupsStore: observable,\n      preselectionStore: observable,\n      scaleFactor: observable,\n      voicingStore: observable,\n    });\n    this.groupsStore = new GroupsStore();\n    this.applyPolicies();\n  }\n\n  applyPolicies() {\n    Policies.voicingStoreUsesSelectedClef()(this);\n  }\n}\n","import React from 'react';\nimport { AppStore } from 'src/app/AppStore';\n\nconst appStore = new AppStore();\n\nexport const StoreContext = React.createContext<AppStore>(appStore);\n\nexport const StoreProvider: React.FC = ({ children }) => {\n  return (\n    <StoreContext.Provider value={appStore}>\n      {children}\n    </StoreContext.Provider>\n  );\n};","import React from 'react';\nimport { StoreContext } from 'src/app/components/StoreProvider';\n\nexport const useStore = () => {\n  const store = React.useContext(StoreContext);\n  if (!store) {\n    throw new Error('useStore must be used within a StoreProvider.');\n  }\n  return store;\n};","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from 'src/app/components';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin"],"sourceRoot":""}