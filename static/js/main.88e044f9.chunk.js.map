{"version":3,"sources":["webpack:///./src/keyboard/components/Keyboard.css?49b5","webpack:///./src/quiz/components/QuizFrame.scss?a323","webpack:///./src/voicings/components/VoicingTitle.scss?abc6","groups/components/GroupsFrame.scss","groups/components/GroupsFrameTopPanel.scss","webpack:///./src/groups/components/GroupPicker.scss?5697","groups/components/GroupsFrameLeftPanel.scss","keyboard/components/ClefListView.scss","webpack:///./src/keyboard/components/ClefListViewItem.scss?7f46","webpack:///./src/io/components/IoMenu.scss?3647","quiz/components/QuizFrameTopPanel.scss","webpack:///./src/app/components/App.scss?2ba2","webpack:///./src/index.css?68b8","quiz/components/QuizFrame.tsx","utils/mathMod.ts","voicings/noteConstants.ts","keyboard/keyConstants.ts","quiz/utils/voicingTitleFromQuery.ts","voicings/components/VoicingTitle.tsx","groups/components/GroupsFrame.tsx","groups/components/GroupsFrameTopPanel.tsx","utils/components/ValuePicker.tsx","groups/components/GroupPicker.tsx","groups/components/GroupsFrameLeftPanel.tsx","utils/components/Effect.tsx","utils/RST.ts","utils/components/ResourceView.tsx","groups/components/LoadGroupsEffect.tsx","groups/components/SelectGroupEffect.tsx","keyboard/components/ClefModulationSelector.tsx","keyboard/components/ClefSelector.tsx","keyboard/components/Marker.tsx","keyboard/components/Key.tsx","keyboard/noteColours.ts","keyboard/utils/noteValueToColour.ts","keyboard/components/Octave.tsx","voicings/utils/playChord.ts","voicings/components/InversionSelector.tsx","voicings/components/RandomChordSelector.tsx","keyboard/components/Keyboard.tsx","keyboard/components/ClefListView.tsx","keyboard/components/ClefListViewItem.tsx","voicings/parse.ts","io/components/IoMenu.tsx","quiz/components/QuizFrameTopPanel.tsx","quiz/components/QuizView.tsx","utils/ids.ts","quiz/QuizState/policies/selectClefBasedOnPreselection.ts","utils/random.ts","voicings/utils/invertChord.ts","voicings/utils/voicingToChord.ts","quiz/utils/createQuery.ts","quiz/QuizState/facets/Inputs.ts","quiz/QuizState/facets/Outputs.ts","quiz/QuizState/index.ts","voicings/voicingGroups.ts","quiz/components/QuizStateProvider.tsx","app/components/UrlRouter.tsx","app/AppStore/policies/voicingStoreUsesSelectedClef.ts","groups/GroupsStore.ts","keyboard/ClefStore.ts","keyboard/PreselectionStore.ts","voicings/VoicingStore.ts","app/AppStore/index.ts","app/components/StoreProvider.tsx","app/components/useStore.ts","app/components/App.tsx","reportWebVitals.ts","index.tsx"],"names":["QuizFrame","observer","props","classnames","children","mathMod","m","p","Number","isInteger","NaN","root","flat9","ninth","sharp9","flat3","third","fourth","eleventh","sharp4","sharp11","flat5","fifth","sharp5","flat6","flat13","sixth","thirteenth","flat7","seventh","noteNameByValue","valueByNoteName","two","second","nine","three","four","eleven","five","six","thirteen","seven","clefC","clefCSharp","clefCFlat","clefD","clefDSharp","clefDFlat","clefE","clefESharp","clefEFlat","clefF","clefFSharp","clefFFlat","clefG","clefGSharp","clefGFlat","clefA","clefASharp","clefAFlat","clefB","clefBSharp","clefBFlat","clefs","clefOffsets","clefLetters","whiteKeyIndexes","blackKeyIndexes","isWhiteKeyIndex","keyIndex","includes","nrOfNotesInOctave","octaveRootNoteValue","octaveIndex","noteValueToIndex","noteValue","voicingTitleFromQuery","query","noteIndex","inversion","voicing","chord","length","startNoteIdx","startNoteName","clef","name","VoicingTitle","label","GroupsFrame","GroupsFrameTopPanel","ValuePicker","isMulti","isCreatable","pickableValue","pickableValues","labelFromValue","others","toPickerValue","pickableVal","__isNew__","value","options","map","pickerProps","isNil","undefined","onKeyDown","e","picker","zIndex","GroupPicker","useDefaultProps","onChange","action","values","groupsSelection","ids","x","id","className","groups","items","GroupsFrameLeftPanel","EffectWithoutArgs","f","useDeepCompareEffect","cleanUpFunction","RESET","UPDATING","ERRORED","UPDATED","LOADING","resetRS","type","isResetRS","rs","updatingRS","updating_state","isUpdatingRS","erroredRS","message","isErroredRS","updatedRS","isUpdatedRS","loadingRS","updateRes","rsMap","update","then","getErrorMsg","result","catch","defaultRenderErrored","defaultRenderUpdating","ResourceView","renderErrored","renderUpdating","tryRenderUpdated","renderUpdated","catchAll","Error","renderReset","LoadGroupsEffect","useStore","groupsStore","loadGroups","SelectGroupEffect","ClefModulationSelector","preselectionStore","key","setIsSharpening","setIsFlattening","reset","ClefSelector","setClefLetter","Marker","filledStripeHeight","bgStripeHeight","nrOfStripes","Math","ceil","height","isStriped","pipe","always","range","stripeIdx","y","min","offsetX","offsetY","fill","width","whiteKeyProps","markerHeight","blackKeyProps","whiteKeyX","i","fraction","blackKeyX","getKeyX","isWhiteKey","keyX","keyIndexes","indexOf","Key","index","keyProps","markerOffsetY","scaleFactor","markerColour","markerIsStriped","noteColours","noteValueToColour","harmonicColour","endsWith","colour","head","split","Octave","concat","keys","add","AudioContext","window","webkitAudioContext","context","synth","AudioSynth","playChord","forEach","note","idx","setTimeout","playNote","InversionSelector","voicingStore","setInversion","quizState","RandomChordSelector","pickRandomChord","Keyboard","clefStore","octaves","onClick","ClefListView","clefDivs","clefsSelection","selectItem","itemId","isShift","isCtrl","noItems","ClefListViewItem","onMouseDown","parseVoicing","data","console","log","parseVoicingGroup","voicings","cache","parseVoicingGroups","twitterUrl","IoMenu","eventKey","navigator","clipboard","writeText","JSON","stringify","open","readText","clipText","setGroups","parse","QuizFrameTopPanel","HelpButton","nextQuery","QuizView","React","useMemo","listToItemById","qsList","item","getIds","selectClefBasedOnPreselection","handler","event","topic","details","clefLetter","isSharpening","isFlattening","setClef","signal","remove","randomElement","floor","random","invertChord","pos","rotate","arr","maxNote","first","take","last","takeLast","rotateBack","minNote","abs","getInversionRange","topC","minInversion","maxInversion","l","voicingToChord","rootNoteValue","keyOffset","getRandomInversion","L","inversionRange","filter","inversions","createQuery","nrVoicings","sum","voicingIdx","groupIdx","count","group","Inputs","input","Outputs","groupsDisplay","output","computed","QuizState","selection","Selection","highlight","Highlight","registerFacets","makeObservable","_setClefsCallbacks","_applyClefsPolicies","makeCtrObservable","_setGroupsCallbacks","_applyGroupsPolicies","cuf","Policies","addCleanUpFunctionToCtr","ctr","setCallbacks","handleSelectItem","selectionParams","FacetPolicies","Inputs_items","Outputs_display","policies","mapDataToFacet","getm","Facets","installPolicies","Outputs_itemById","cleanUpCtr","inputs","setVoicing","observable","facet","voicingGroups","QuizStateProvider","createState","state","setClefs","updateState","reaction","fireImmediately","getDefaultProps","outputs","clefsDisplay","clefsHighlight","groupsHighlight","destroy","history","createBrowserHistory","UrlRouter","voicingStoreUsesSelectedClef","appStore","GroupsStore","ClefStore","clefSharp","clefFlat","setClefSharp","setClefFlat","modulate","PreselectionStore","Signal","dispatch","cScale","VoicingStore","clamp","nrOfVoices","AppStore","setWindowWidth","innerWidth","applyPolicies","StoreContext","createContext","StoreProvider","store","useContext","App","useEffect","handleResize","addEventListener","isPortrait","useLandscapeDiv","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.88e044f9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { QuizFrameTopPanel } from 'src/quiz/components';\nimport './QuizFrame.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\nexport const QuizFrame: React.FC<PropsT> = observer((props: PropsT) => {\n  return (\n    <div className={classnames('QuizFrame flex flex-col px-2')}>\n      <QuizFrameTopPanel />\n      <div\n        className={classnames(\n          'QuizFrame__MidSection flex flex-row justify-center'\n        )}\n      >\n        {props.children}\n      </div>\n    </div>\n  );\n});\n","export const mathMod = (m: number, p: number) => {\n  if (!Number.isInteger(m)) {\n    return NaN;\n  }\n  if (!Number.isInteger(p) || p < 1) {\n    return NaN;\n  }\n  return ((m % p) + p) % p;\n};\n","export const root = 0;\nexport const flat9 = 1;\nexport const ninth = 2;\nexport const sharp9 = 3;\nexport const flat3 = 3;\nexport const third = 4;\nexport const fourth = 5;\nexport const eleventh = 5;\nexport const sharp4 = 6;\nexport const sharp11 = 6;\nexport const flat5 = 6;\nexport const fifth = 7;\nexport const sharp5 = 8;\nexport const flat6 = 8;\nexport const flat13 = 8;\nexport const sixth = 9;\nexport const thirteenth = 9;\nexport const flat7 = 10;\nexport const seventh = 11;\n\nexport const noteNameByValue = {\n  '0': 'root',\n  '1': 'flat nine',\n  '2': 'nine',\n  '3': 'flat third',\n  '4': 'third',\n  '5': 'fourth/eleventh',\n  '6': 'tritone',\n  '7': 'fifth',\n  '8': 'flat thirteen',\n  '9': 'thirteenth',\n  '10': 'flat seven',\n  '11': 'seven',\n};\n\nexport const valueByNoteName = {\n  root: 0,\n  'flat nine': 1,\n  flat9: 1,\n  two: 2,\n  second: 2,\n  nine: 2,\n  ninth: 2,\n  'flat third': 3,\n  flat3: 3,\n  three: 4,\n  third: 4,\n  four: 5,\n  fourth: 5,\n  eleven: 5,\n  eleventh: 5,\n  sharp4: 6,\n  flat5: 6,\n  sharp11: 6,\n  'sharp fourth': 6,\n  'sharp eleventh': 6,\n  five: 7,\n  fifth: 7,\n  'flat thirteen': 8,\n  flat6: 8,\n  flat13: 8,\n  six: 9,\n  sixth: 9,\n  thirteen: 9,\n  thirteenth: 9,\n  flat7: 10,\n  'flat seven': 10,\n  seven: 11,\n  seventh: 11,\n};\n","import { includes } from 'ramda';\nimport { mathMod } from 'src/utils/mathMod';\n\nexport const clefC = 'C';\nexport const clefCSharp = 'C#';\nexport const clefCFlat = 'Cb';\nexport const clefD = 'D';\nexport const clefDSharp = 'D#';\nexport const clefDFlat = 'Db';\nexport const clefE = 'E';\nexport const clefESharp = 'E#';\nexport const clefEFlat = 'Eb';\nexport const clefF = 'F';\nexport const clefFSharp = 'F#';\nexport const clefFFlat = 'Fb';\nexport const clefG = 'G';\nexport const clefGSharp = 'G#';\nexport const clefGFlat = 'Gb';\nexport const clefA = 'A';\nexport const clefASharp = 'A#';\nexport const clefAFlat = 'Ab';\nexport const clefB = 'B';\nexport const clefBSharp = 'B#';\nexport const clefBFlat = 'Bb';\n\nexport const clefs = [\n  'C',\n  'C#',\n  'D',\n  'Eb',\n  'E',\n  'F',\n  'F#',\n  'G',\n  'Ab',\n  'A',\n  'Bb',\n  'B',\n];\n\nexport const clefOffsets: { [key: string]: number } = {\n  [clefCFlat]: 11,\n  [clefC]: 0,\n  [clefCSharp]: 1,\n  [clefDFlat]: 1,\n  [clefD]: 2,\n  [clefDSharp]: 3,\n  [clefEFlat]: 3,\n  [clefE]: 4,\n  [clefESharp]: 5,\n  [clefFFlat]: 4,\n  [clefF]: 5,\n  [clefFSharp]: 6,\n  [clefGFlat]: 6,\n  [clefG]: 7,\n  [clefGSharp]: 8,\n  [clefAFlat]: 8,\n  [clefA]: 9,\n  [clefASharp]: 10,\n  [clefBFlat]: 10,\n  [clefB]: 11,\n  [clefBSharp]: 0,\n};\n\nexport const clefLetters = [clefC, clefD, clefE, clefF, clefG, clefA, clefB];\n\nexport const whiteKeyIndexes = [0, 2, 4, 5, 7, 9, 11];\nexport const blackKeyIndexes = [1, 3, 6, 8, 10];\n\nexport const isWhiteKeyIndex = (keyIndex: number) =>\n  includes(keyIndex, whiteKeyIndexes);\n\nexport const nrOfNotesInOctave = 12;\nexport const octaveRootNoteValue = (octaveIndex: number) =>\n  octaveIndex * nrOfNotesInOctave;\nexport const noteValueToIndex = (noteValue: number) =>\n  mathMod(noteValue, nrOfNotesInOctave);\n","import { QueryT } from 'src/quiz/types';\nimport { mathMod } from 'src/utils/mathMod';\nimport { noteNameByValue } from 'src/voicings/noteConstants';\nimport { noteValueToIndex, clefOffsets } from 'src/keyboard/keyConstants';\n\nexport const voicingTitleFromQuery = (query: QueryT) => {\n  const noteIndex = mathMod(query.inversion, query.voicing.chord.length);\n  const startNoteIdx = noteValueToIndex(query.voicing.chord[noteIndex]);\n  const startNoteName = (noteNameByValue as any)[startNoteIdx];\n\n  return `${query.clef} ${query.voicing.name} from ` + `${startNoteName}`;\n};\n","import { observer } from 'mobx-react-lite';\nimport 'src/keyboard/components/Keyboard.css';\nimport { voicingTitleFromQuery } from 'src/quiz/utils/voicingTitleFromQuery';\nimport { QueryT } from 'src/quiz/types';\n\nimport './VoicingTitle.scss';\n\ntype PropsT = {\n  query?: QueryT;\n  label?: string;\n};\n\nexport const VoicingTitle = observer((props: PropsT) => {\n  return (\n    <div className=\"VoicingTitle\">\n      {(props.label ?? '') +\n        (props.query ? voicingTitleFromQuery(props.query) : '')}\n    </div>\n  );\n});\n","import classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport {\n  GroupsFrameLeftPanel,\n  GroupsFrameTopPanel,\n} from 'src/groups/components';\nimport './GroupsFrame.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\nexport const GroupsFrame: React.FC<PropsT> = observer((props: PropsT) => {\n  return (\n    <div className={classnames('GroupsFrame flex flex-col')}>\n      <GroupsFrameTopPanel />\n      <div className={classnames('GroupsFrame__MidSection flex flex-row')}>\n        <GroupsFrameLeftPanel />\n        {props.children}\n      </div>\n    </div>\n  );\n});\n","import React from 'react';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport './GroupsFrameTopPanel.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\nexport const GroupsFrameTopPanel: React.FC<PropsT> = observer(() => {\n  return (\n    <div\n      className={classnames('GroupsFrameTopPanel')}\n    >\n    </div>\n  );\n});","import { observer } from 'mobx-react-lite';\nimport { isNil } from 'ramda';\nimport Select from 'react-select';\nimport CreatableSelect from 'react-select/creatable';\n\nexport interface PickerValueT {\n  value: any;\n  label: string;\n  __isNew__?: boolean;\n}\n\ntype PropsT<ValueT> = {\n  isMulti: boolean;\n  isCreatable: boolean;\n  pickableValues: ValueT[];\n  pickableValue: ValueT;\n  labelFromValue: (value: any) => string;\n  [k: string]: any;\n};\n\nexport const ValuePicker = observer(\n  <ValueT, ConcretePropsT extends PropsT<ValueT>>(\n    props: ConcretePropsT\n  ): JSX.Element => {\n    const {\n      isMulti,\n      isCreatable,\n      pickableValue,\n      pickableValues,\n      labelFromValue,\n      ...others\n    } = props;\n\n    const toPickerValue = (pickableVal: any) => {\n      return pickableVal.__isNew__\n        ? pickableVal\n        : {\n            value: pickableVal,\n            label: labelFromValue(pickableVal),\n          };\n    };\n\n    const options = pickableValues.map(toPickerValue);\n\n    const pickerProps = {\n      isMulti: isMulti,\n      options,\n      value: isNil(pickableValue)\n        ? undefined\n        : isMulti\n        ? (pickableValue as any).map(toPickerValue)\n        : toPickerValue(pickableValue),\n      onKeyDown: (e: any) => {\n        if (others.onKeyDown) {\n          others.onKeyDown(e);\n        }\n      },\n      ...others,\n    };\n\n    const picker = isCreatable ? (\n      <CreatableSelect {...pickerProps} />\n    ) : (\n      <Select {...pickerProps} />\n    );\n\n    return <div style={{ zIndex: others.zIndex }}>{picker}</div>;\n  }\n);\n","import classnames from 'classnames';\nimport { action } from 'mobx';\nimport { observer } from 'mobx-react-lite';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport { Selection } from 'skandha-facets/Selection';\n\nimport { PickerValueT, ValuePicker } from 'src/utils/components/ValuePicker';\nimport { GroupT } from 'src/groups/types';\n\nimport './GroupPicker.scss';\n\ntype PropsT = {\n  className?: any;\n};\n\ntype DefaultPropsT = {\n  groups: GroupT[];\n  groupsSelection: Selection;\n};\n\nexport const GroupPicker: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  const onChange = action((value: PickerValueT) => {\n    const values: Array<any> = (value as any) ?? [];\n    props.groupsSelection.ids = values.map((x) => x.value.id);\n  });\n\n  return (\n    <div className={classnames('GroupPicker', props.className)}>\n      <ValuePicker\n        isMulti={true}\n        isCreatable={false}\n        pickableValues={props.groups}\n        labelFromValue={(x: any) => x.name}\n        pickableValue={props.groupsSelection.items}\n        onChange={onChange}\n      />\n    </div>\n  );\n});\n","import React from 'react';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\n\nimport './GroupsFrameLeftPanel.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\nexport const GroupsFrameLeftPanel: React.FC<PropsT> = observer(() => {\n  return (\n    <div\n      className={classnames('GroupsFrameLeftPanel')}\n    >\n    </div>\n  );\n});","import React from 'react';\nimport { observer } from 'mobx-react-lite';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\n\ntype EffectWithoutArgsPropsT = {\n  f: () => void;\n};\n\nexport const EffectWithoutArgs: (\n  props: EffectWithoutArgsPropsT\n) => React.ReactElement = observer(({ f }) => {\n  useDeepCompareEffect(() => {\n    const cleanUpFunction = f();\n    return cleanUpFunction;\n  }, [f]);\n  return <React.Fragment />;\n});\n","import { action } from \"mobx\";\n\nconst RESET = \"RESET\";\nconst UPDATING = \"UPDATING\";\nconst ERRORED = \"ERRORED\";\nconst UPDATED = \"UPDATED\";\nconst LOADING = \"LOADING\";\n\nexport type ResetRST = {\n  type: typeof RESET;\n};\n\nexport const resetRS = (): ResetRST => ({ type: RESET });\n\nexport const isResetRS = <UpdatingT>(rs: RST<UpdatingT>): rs is ResetRST =>\n  rs.type === RESET;\n\nexport type UpdatingRST<UpdatingT> = {\n  type: typeof UPDATING;\n  updating_state: UpdatingT;\n};\n\nexport const updatingRS = <UpdatingT>(\n  updating_state: UpdatingT\n): UpdatingRST<UpdatingT> => ({\n  type: UPDATING,\n  updating_state,\n});\n\nexport const isUpdatingRS = <UpdatingT>(\n  rs: RST<UpdatingT>\n): rs is UpdatingRST<UpdatingT> => rs.type === UPDATING;\n\nexport type ErroredRST = {\n  type: typeof ERRORED;\n  message: string;\n};\n\nexport const erroredRS = (message: string): ErroredRST => ({\n  type: ERRORED,\n  message,\n});\n\nexport const isErroredRS = <UpdatingT>(rs: RST<UpdatingT>): rs is ErroredRST =>\n  rs.type === ERRORED;\n\nexport type UpdatedRST = {\n  type: typeof UPDATED;\n};\n\nexport const updatedRS = (): UpdatedRST => ({\n  type: UPDATED,\n});\n\nexport const isUpdatedRS = <UpdatingT>(rs: RST<UpdatingT>): rs is UpdatedRST =>\n  rs.type === UPDATED;\n\nexport type LoadingT = {\n  type: typeof LOADING;\n};\n\nexport const loadingRS = (): UpdatingRST<LoadingT> =>\n  updatingRS({\n    type: LOADING,\n  });\n\nexport type RST<UpdatingT = LoadingT> =\n  | ResetRST\n  | UpdatingRST<UpdatingT>\n  | ErroredRST\n  | UpdatedRST;\n\nexport const updateRes = action(\n  (\n    rsMap: { [k: string]: any },\n    id: string,\n    update: Function,\n    then: Function,\n    getErrorMsg?: Function\n  ) => {\n    rsMap[id] = loadingRS();\n    return update()\n      .then(\n        action((result: any) => {\n          then(result);\n          rsMap[id] = updatedRS();\n        })\n      )\n      .catch(\n        action((e: any) => {\n          rsMap[id] = erroredRS(\n            getErrorMsg ? getErrorMsg(e) : `Could not load ${id}`\n          );\n        })\n      );\n  }\n);\n","import React from 'react';\nimport { observer } from 'mobx-react-lite';\n\nimport {\n  RST,\n  isResetRS,\n  isUpdatingRS,\n  isUpdatedRS,\n  isErroredRS,\n} from 'src/utils/RST';\n\ntype PropsT<UpdatingT> = {\n  rs: RST<UpdatingT>;\n  renderUpdated: () => JSX.Element;\n  renderUpdating?: (updating_state: UpdatingT) => JSX.Element;\n  renderErrored?: (message: string) => JSX.Element;\n};\n\n// TODO better default renders\nconst defaultRenderErrored = (message: string) => {\n  return <div>Error{message !== undefined && `: ${message}`}</div>;\n};\nconst defaultRenderUpdating = () => {\n  return <div>Loading...</div>;\n};\n\nexport const ResourceView = observer(\n  <UpdatingT,>(props: PropsT<UpdatingT>): JSX.Element => {\n    const renderErrored = props.renderErrored ?? defaultRenderErrored;\n    const renderUpdating = props.renderUpdating ?? defaultRenderUpdating;\n\n    const tryRenderUpdated = () => {\n      try {\n        const result = props.renderUpdated();\n        return result;\n      } catch (e) {\n        return renderErrored(e.message);\n      }\n    };\n\n    const catchAll = () => {\n      throw Error(`Received unrecognized resource state ${props.rs}`);\n    };\n\n    const renderReset = () => {\n      return <React.Fragment />;\n    };\n\n    return isUpdatedRS(props.rs)\n      ? tryRenderUpdated()\n      : isErroredRS(props.rs)\n      ? renderErrored(props.rs.message)\n      : isUpdatingRS(props.rs)\n      ? renderUpdating(props.rs.updating_state)\n      : isResetRS(props.rs)\n      ? renderReset()\n      : catchAll();\n  }\n);\n","import React from 'react';\n\nimport { EffectWithoutArgs } from 'src/utils/components';\nimport { useStore } from 'src/app/components';\n\ntype PropsT = {};\n\nexport const LoadGroupsEffect: React.FC<PropsT> = (p: PropsT) => {\n  const { groupsStore } = useStore();\n  return (\n    <EffectWithoutArgs\n      f={() => {\n        groupsStore.loadGroups();\n      }}\n    />\n  );\n};","import React from 'react';\n\nimport { EffectWithoutArgs } from 'src/utils/components';\n\ntype PropsT = {};\n\nexport const SelectGroupEffect: React.FC<PropsT> = (p: PropsT) => {\n  return (\n    <EffectWithoutArgs\n      f={() => {\n      }}\n    />\n  );\n};","import { observer } from 'mobx-react-lite';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { useStore } from 'src/app/components';\n\nexport const ClefModulationSelector = observer(({ children }) => {\n  const { preselectionStore } = useStore();\n\n  return (\n    <KeyboardEventHandler\n      handleKeys={['up', 'down']}\n      handleEventType=\"keydown\"\n      onKeyEvent={(key: string, e: any) => {\n        preselectionStore.setIsSharpening(key === 'up');\n        preselectionStore.setIsFlattening(key === 'down');\n      }}\n    >\n      <KeyboardEventHandler\n        handleKeys={['up', 'down']}\n        handleEventType=\"keyup\"\n        onKeyEvent={(key: string, e: any) => {\n          preselectionStore.reset();\n        }}\n      >\n        {children}\n      </KeyboardEventHandler>\n    </KeyboardEventHandler>\n  );\n});\n","import { observer } from 'mobx-react-lite';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { useStore } from 'src/app/components';\nimport { clefLetters } from 'src/keyboard/keyConstants';\n\nexport const ClefSelector = observer(({ children }) => {\n  const { preselectionStore } = useStore();\n\n  return (\n    <KeyboardEventHandler\n      handleKeys={clefLetters}\n      handleEventType=\"keydown\"\n      onKeyEvent={(key: string, e: any) => {\n        preselectionStore.setClefLetter(key);\n      }}\n    >\n      <KeyboardEventHandler\n        handleKeys={clefLetters}\n        handleEventType=\"keyup\"\n        onKeyEvent={(key: string, e: any) => {\n          preselectionStore.reset();\n        }}\n      >\n        {children}\n      </KeyboardEventHandler>\n    </KeyboardEventHandler>\n  );\n});\n","import { observer } from 'mobx-react-lite';\nimport { always, map, pipe, range } from 'ramda';\nimport React from 'react';\nimport { Rect } from 'react-konva';\n\ntype PropsT = {\n  offsetX: number;\n  offsetY: number;\n  height: number;\n  width: number;\n  fill: any;\n  backgroundColour: any;\n  isStriped: boolean;\n};\n\nexport const Marker: React.FC<PropsT> = observer((props: PropsT) => {\n  const filledStripeHeight = 5;\n  const bgStripeHeight = 3.5;\n  const nrOfStripes = Math.ceil(\n    props.height / (filledStripeHeight + bgStripeHeight)\n  );\n\n  return props.isStriped\n    ? (pipe(\n        always(range(0, nrOfStripes)),\n        map((stripeIdx) => {\n          const y = stripeIdx * (filledStripeHeight + bgStripeHeight);\n          const height = Math.min(filledStripeHeight, props.height - y);\n\n          return (\n            <Rect\n              key={stripeIdx}\n              x={props.offsetX + 1}\n              y={props.offsetY + y}\n              fill={props.fill}\n              width={props.width - 2}\n              height={height}\n              strokeWidth={0}\n              opacity={1}\n            />\n          );\n        })\n      )() as any)\n    : ([\n        <Rect\n          key={0}\n          x={props.offsetX + 1}\n          y={props.offsetY}\n          fill={props.fill}\n          width={props.width - 2}\n          height={props.height}\n          strokeWidth={0}\n          opacity={1}\n        />,\n      ] as any);\n});\n","import { observer } from 'mobx-react-lite';\nimport { always, indexOf, map, pipe, range } from 'ramda';\nimport React from 'react';\nimport { Rect } from 'react-konva';\nimport { Marker } from 'src/keyboard/components/Marker';\nimport {\n  blackKeyIndexes,\n  isWhiteKeyIndex,\n  whiteKeyIndexes,\n} from 'src/keyboard/keyConstants';\n\nconst whiteKeyProps = {\n  width: 50,\n  height: 250,\n  fill: '#FFFFFF',\n  markerHeight: 56,\n};\n\nconst blackKeyProps = {\n  width: 25,\n  height: 160,\n  fill: '#444444',\n  markerHeight: 100,\n};\n\nconst whiteKeyX = pipe(\n  always(range(0, 7)),\n  map((i) => i * whiteKeyProps.width)\n)();\n\nconst fraction = (x: number) => x * blackKeyProps.width;\nconst blackKeyX = [\n  whiteKeyX[1] - fraction(0.66),\n  whiteKeyX[2] - fraction(0.33),\n  whiteKeyX[4] - fraction(0.7),\n  whiteKeyX[5] - fraction(0.5),\n  whiteKeyX[6] - fraction(0.3),\n];\n\nconst getKeyX = (keyIndex: number) => {\n  const isWhiteKey = isWhiteKeyIndex(keyIndex);\n  const keyX = isWhiteKey ? whiteKeyX : blackKeyX;\n  const keyIndexes = isWhiteKey ? whiteKeyIndexes : blackKeyIndexes;\n  return keyX[indexOf(keyIndex, keyIndexes)];\n};\n\ntype PropsT = {\n  index: number;\n  octaveIndex: number;\n  markerColour?: string;\n  markerIsStriped: boolean;\n  scaleFactor: number;\n};\n\nexport const Key = observer((props: PropsT) => {\n  const isWhiteKey = isWhiteKeyIndex(props.index);\n  const keyProps = isWhiteKey ? whiteKeyProps : blackKeyProps;\n\n  const offsetY = 0;\n  const markerOffsetY = isWhiteKey ? 3 : 2;\n  const offsetX = props.octaveIndex * 7 * whiteKeyProps.width;\n\n  const x = offsetX + getKeyX(props.index);\n\n  return (\n    <React.Fragment>\n      <Rect\n        x={x * props.scaleFactor}\n        y={offsetY * props.scaleFactor}\n        fill={keyProps.fill}\n        stroke=\"#000000\"\n        opacity={1}\n        width={keyProps.width * props.scaleFactor}\n        height={keyProps.height * props.scaleFactor}\n      />\n      <Marker\n        offsetX={(x + 2) * props.scaleFactor}\n        offsetY={\n          (offsetY + keyProps.height - keyProps.markerHeight - markerOffsetY) *\n          props.scaleFactor\n        }\n        height={keyProps.markerHeight * props.scaleFactor}\n        width={(keyProps.width - 4) * props.scaleFactor}\n        fill={props.markerColour}\n        isStriped={props.markerIsStriped}\n        backgroundColour={keyProps.fill}\n      />\n    </React.Fragment>\n  );\n});\n","export const noteColours: { [key: number]: string } = {\n  0: '#aaaaaa',\n  1: '#fa9835-striped',\n  2: '#fa9835', // orange\n  3: '#40d530-striped',\n  4: '#40d530', // green\n  5: '#fee449', // yellow\n  6: '#f53311-striped',\n  7: '#f53311', // red\n  8: '#38baf2-striped',\n  9: '#38baf2', // blue\n  10: '#ff99ff-striped',\n  11: '#ff99ff', // violet\n};\n","import { head, includes, split } from 'ramda';\nimport { clefOffsets, noteValueToIndex } from 'src/keyboard/keyConstants';\nimport { noteColours } from 'src/keyboard/noteColours';\nimport { ChordT, NoteT } from 'src/voicings/types';\n\nexport function noteValueToColour(\n  noteValue: NoteT,\n  clef: string,\n  chord: ChordT\n) {\n  const harmonicColour = includes(noteValue, chord)\n    ? noteColours[noteValueToIndex(noteValue - clefOffsets[clef])]\n    : undefined;\n\n  const isStriped = !!(harmonicColour && harmonicColour.endsWith('-striped'));\n  const colour = isStriped\n    ? head(split('-striped', harmonicColour ?? '')) ?? ''\n    : harmonicColour;\n\n  return { colour, isStriped };\n}\n","import { observer } from 'mobx-react-lite';\nimport { add, always, concat, map, pipe } from 'ramda';\nimport React from 'react';\nimport { Layer } from 'react-konva';\nimport { Key } from 'src/keyboard/components/Key';\nimport {\n  blackKeyIndexes,\n  noteValueToIndex,\n  octaveRootNoteValue,\n  whiteKeyIndexes,\n} from 'src/keyboard/keyConstants';\nimport { noteValueToColour } from 'src/keyboard/utils/noteValueToColour';\n\ntype PropsT = {\n  index: number;\n  clef: string;\n  chord: any;\n  scaleFactor: number;\n};\n\nexport const Octave = observer((props: PropsT) => {\n  const keyIndexes = concat(whiteKeyIndexes, blackKeyIndexes);\n  const keys = pipe(\n    always(keyIndexes),\n    map(add(octaveRootNoteValue(props.index))),\n    map((noteValue) => {\n      const keyIndex = noteValueToIndex(noteValue);\n      const { colour, isStriped } = noteValueToColour(\n        noteValue,\n        props.clef,\n        props.chord\n      );\n      return (\n        <Key\n          key={noteValue}\n          index={keyIndex}\n          octaveIndex={props.index}\n          markerColour={colour}\n          markerIsStriped={isStriped}\n          scaleFactor={props.scaleFactor}\n        />\n      );\n    })\n  )();\n  return <Layer>{keys}</Layer>;\n});\n","import AudioSynth from 'audiosynth';\nimport { clefOffsets } from 'src/keyboard/keyConstants';\nimport { ClefT } from 'src/keyboard/types';\nimport { ChordT } from 'src/voicings/types';\n\nvar AudioContext = window.AudioContext || (window as any).webkitAudioContext;\n\nvar context = new AudioContext();\nvar synth = new AudioSynth(context);\n\nexport const playChord = (chord: ChordT, clef: ClefT) => {\n  chord.forEach((note, idx) =>\n    window.setTimeout(() => {\n      synth.playNote(note + 48, 0.5, 0.75, 0);\n    }, 200 + idx * 150)\n  );\n  synth.playNote(clefOffsets[clef] + 36, 1.0, 1.0, 0);\n};\n","import { observer } from 'mobx-react-lite';\nimport { FC, useDefaultProps } from 'react-default-props-context';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { useStore } from 'src/app/components';\nimport { QuizState } from 'src/quiz/QuizState';\nimport { playChord } from 'src/voicings/utils/playChord';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const InversionSelector: FC<PropsT, DefaultPropsT> = observer(\n  (p: PropsT) => {\n    const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n    const { voicingStore } = useStore();\n    return (\n      <KeyboardEventHandler\n        handleKeys={['ctrl+left', 'ctrl+right']}\n        onKeyEvent={(key: string, e: any) => {\n          if (key === 'ctrl+right') {\n            voicingStore.setInversion(voicingStore.inversion + 1);\n            if (props.quizState.query) {\n              props.quizState.query.inversion = voicingStore.inversion;\n            }\n          }\n          if (key === 'ctrl+left') {\n            voicingStore.setInversion(voicingStore.inversion - 1);\n            if (props.quizState.query) {\n              props.quizState.query.inversion = voicingStore.inversion;\n            }\n          }\n        }}\n      >\n        <KeyboardEventHandler\n          handleKeys={['p']}\n          onKeyEvent={(key: string, e: any) => {\n            if (voicingStore.chord) {\n              playChord(voicingStore.chord, voicingStore.clef);\n            }\n          }}\n        >\n          {props.children}\n        </KeyboardEventHandler>\n      </KeyboardEventHandler>\n    );\n  }\n);\n","import { observer } from 'mobx-react-lite';\nimport KeyboardEventHandler from 'react-keyboard-event-handler';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport { QuizState } from 'src/quiz/QuizState';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const RandomChordSelector: FC<PropsT, DefaultPropsT> = observer(\n  (p: PropsT) => {\n    const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n    return (\n      <KeyboardEventHandler\n        handleKeys={['space', 'enter']}\n        onKeyEvent={(key: string, e: any) => {\n          props.quizState.pickRandomChord();\n        }}\n      >\n        {props.children}\n      </KeyboardEventHandler>\n    );\n  }\n);\n","import { observer } from 'mobx-react-lite';\nimport { always, map, pipe, range } from 'ramda';\nimport { FC, useDefaultProps } from 'react-default-props-context';\nimport { Stage } from 'react-konva';\nimport { useStore } from 'src/app/components';\nimport { ClefModulationSelector } from 'src/keyboard/components/ClefModulationSelector';\nimport { ClefSelector } from 'src/keyboard/components/ClefSelector';\nimport 'src/keyboard/components/Keyboard.css';\nimport { Octave } from 'src/keyboard/components/Octave';\nimport { InversionSelector } from 'src/voicings/components/InversionSelector';\nimport { RandomChordSelector } from 'src/voicings/components/RandomChordSelector';\n\ntype PropsT = {\n  onClick: (event: any) => void;\n};\n\ntype DefaultPropsT = {};\n\nexport const Keyboard: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  const { voicingStore, clefStore, scaleFactor } = useStore();\n\n  const octaves = pipe(\n    always(range(0, 4)),\n    map((i) => (\n      <Octave\n        key={i}\n        index={i}\n        clef={clefStore.clef}\n        chord={voicingStore.chord}\n        scaleFactor={scaleFactor}\n      />\n    ))\n  )();\n\n  return (\n    <div className=\"Keyboard__frame\">\n      <RandomChordSelector>\n        <ClefSelector>\n          <ClefModulationSelector>\n            <InversionSelector>\n              <div\n                className=\"Keyboard__overlay absolute z-50\"\n                style={{ height: 250 * scaleFactor, width: 1400 * scaleFactor }}\n                onClick={props.onClick}\n                tabIndex={0}\n              />\n              <div>\n                <Stage width={1400 * scaleFactor} height={250 * scaleFactor}>\n                  {octaves}\n                </Stage>\n              </div>\n            </InversionSelector>\n          </ClefModulationSelector>\n        </ClefSelector>\n      </RandomChordSelector>\n    </div>\n  );\n});\n","import classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { always, map, pipe } from 'ramda';\nimport { FC, useDefaultProps } from 'react-default-props-context';\nimport { Selection } from 'skandha-facets/Selection';\nimport { ClefListViewItem } from 'src/keyboard/components';\nimport { ClefT } from 'src/keyboard/types';\nimport './ClefListView.scss';\n\ntype PropsT = {\n  className?: any;\n};\n\ntype DefaultPropsT = {\n  clefs: ClefT[];\n  clefsSelection: Selection;\n};\n\nexport const ClefListView: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  const clefDivs = pipe(\n    always(props.clefs),\n    map((x) => (\n      <ClefListViewItem\n        key={x}\n        clef={x}\n        className={classnames({\n          'ClefListViewItem--selected': props.clefsSelection.ids.includes(x),\n        })}\n        onMouseDown={(e: any) => {\n          props.clefsSelection.selectItem({\n            itemId: x,\n            isShift: false,\n            isCtrl: true,\n          });\n        }}\n      />\n    ))\n  )();\n\n  const noItems = <h2>There are no clefs</h2>;\n\n  return (\n    <div\n      className={classnames(\n        'ClefListView flex flex-row w-full',\n        props.className\n      )}\n    >\n      {clefDivs.length && clefDivs}\n      {!clefDivs.length && noItems}\n    </div>\n  );\n});\n","import React from 'react';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { ClefT } from 'src/keyboard/types';\n\nimport './ClefListViewItem.scss';\n\nexport type PropsT = {\n  clef: ClefT;\n  onMouseDown: (event: any) => void;\n  className?: any;\n};\n\nexport const ClefListViewItem: React.FC<PropsT> = observer((props: PropsT) => {\n  return (\n    <div\n      className={classnames('ClefListViewItem flex-1', props.className)}\n      onMouseDown={props.onMouseDown}\n    >\n      {props.clef}\n    </div>\n  );\n});\n","import { map } from 'ramda';\nimport { valueByNoteName } from 'src/voicings/noteConstants';\n\nexport const parseVoicing = (data: any) => {\n  const voicing = {\n    ...data,\n    id: data.name,\n    chord: map((x: string) => {\n      const noteValue = (valueByNoteName as any)[x as any];\n      if (noteValue === undefined) {\n        console.log(`Error: unknown note ${x}`);\n      }\n      return noteValue;\n    }, data['chord']),\n  };\n\n  for (let i = 1; i < voicing.chord.length; ++i) {\n    while (voicing.chord[i] <= voicing.chord[i - 1]) {\n      voicing.chord[i] += 12;\n    }\n  }\n\n  return voicing;\n};\n\nconst parseVoicingGroup = (data: any) => {\n  return {\n    ...data,\n    id: data.name,\n    voicings: map(parseVoicing, data['voicings']),\n  };\n};\n\nexport const cache = {\n  data: null,\n};\n\nexport const parseVoicingGroups = (data: any) => {\n  cache.data = data;\n  return map(parseVoicingGroup, data);\n};\n","import { observer } from 'mobx-react-lite';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport Dropdown, { MenuItem } from '@trendmicro/react-dropdown';\nimport { QuizState } from 'src/quiz/QuizState';\nimport { cache, parseVoicingGroups } from 'src/voicings/parse';\n\nimport '@trendmicro/react-buttons/dist/react-buttons.css';\nimport '@trendmicro/react-dropdown/dist/react-dropdown.css';\n\nimport './IoMenu.scss';\n\nconst twitterUrl = `https://twitter.com/intent/tweet?url=https://mnieber.github.io/brainpiano&hashtags=BrainPiano`;\n\ntype PropsT = {};\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const IoMenu: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  return (\n    <Dropdown\n      onSelect={(eventKey: any) => {\n        if (eventKey === 1) {\n          navigator.clipboard.writeText(JSON.stringify(cache.data, null, 2));\n        }\n        if (eventKey === 2) {\n          window.open(twitterUrl);\n        }\n        if (eventKey === 3) {\n          navigator.clipboard.readText().then((clipText) => {\n            debugger;\n            props.quizState.setGroups(parseVoicingGroups(JSON.parse(clipText)));\n          });\n        }\n      }}\n      autoOpen={true}\n      pullRight={true}\n    >\n      <Dropdown.Toggle btnSize=\"lg\" btnStyle=\"flat\">\n        IO\n      </Dropdown.Toggle>\n      <Dropdown.Menu>\n        <MenuItem eventKey={1}>Export</MenuItem>\n        <MenuItem divider />\n        <MenuItem eventKey={2}>Tweet</MenuItem>\n        <MenuItem divider />\n        <MenuItem eventKey={3}>Import</MenuItem>\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n});\n","import React from 'react';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport classnames from 'classnames';\nimport { observer } from 'mobx-react-lite';\nimport { VoicingTitle } from 'src/voicings/components/VoicingTitle';\nimport { GroupPicker } from 'src/groups/components';\nimport { ClefListView } from 'src/keyboard/components';\nimport { QuizState } from 'src/quiz/QuizState';\nimport { IoMenu } from 'src/io/components';\n\nimport './QuizFrameTopPanel.scss';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const QuizFrameTopPanel: FC<PropsT, DefaultPropsT> = observer(\n  (p: PropsT) => {\n    const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n    const HelpButton = (\n      <button\n        onClick={() =>\n          window.open('https://github.com/mnieber/brainpiano#brainpiano')\n        }\n      >\n        Help\n      </button>\n    );\n\n    return (\n      <div className={classnames('QuizFrameTopPanel mb-4')}>\n        <div className=\"QuizFrameTopPanel__firstRow mb4 flex flex-row justify-between\">\n          <VoicingTitle query={props.quizState.query} />\n          {HelpButton}\n          <VoicingTitle\n            label={\n              props.quizState.nextQuery ? 'Next: ' : 'Welcome to BrainPiano!'\n            }\n            query={props.quizState.nextQuery}\n          />\n        </div>\n        <GroupPicker className=\"flex-1\" />\n        <div className=\"flex flex-row justify-between mt-2\">\n          <ClefListView />\n          <IoMenu />\n        </div>\n      </div>\n    );\n  }\n);\n","import React from 'react';\nimport { useDefaultProps, FC } from 'react-default-props-context';\nimport { observer } from 'mobx-react-lite';\nimport { Keyboard } from 'src/keyboard/components/Keyboard';\nimport { QuizFrame } from 'src/quiz/components';\nimport { QuizState } from 'src/quiz/QuizState';\n\ntype PropsT = {};\n\ntype DefaultPropsT = {\n  quizState: QuizState;\n};\n\nexport const QuizView: FC<PropsT, DefaultPropsT> = observer((p: PropsT) => {\n  const props = useDefaultProps<PropsT, DefaultPropsT>(p);\n\n  const onClick = React.useMemo(() => () => props.quizState.pickRandomChord(), [\n    props.quizState,\n  ]);\n  return (\n    <QuizFrame>\n      <Keyboard onClick={onClick} />\n    </QuizFrame>\n  );\n});\n","export function listToItemById(qsList: Array<any>, key: string = 'id') {\n  const result: any = {};\n  qsList.forEach((item) => {\n    result[item[key]] = item;\n  });\n  return result;\n}\n\nexport function getIds(x: Array<any>): Array<string> {\n  return x.map((x) => x.id);\n}\n","import { EventT } from 'src/utils/types';\nimport { QuizState } from 'src/quiz/QuizState';\n\nexport const selectClefBasedOnPreselection = () => (quizState: QuizState) => {\n  const handler = (event: EventT) => {\n    if (quizState.query && event.topic === 'PreselectionStore.selectClef') {\n      quizState.query.clef =\n        event.details.clefLetter +\n        (event.details.isSharpening\n          ? '#'\n          : event.details.isFlattening\n          ? 'b'\n          : '');\n      quizState.props.clefStore.setClef(quizState.query.clef);\n    }\n  };\n\n  quizState.props.preselectionStore.signal.add(handler as any);\n  return () => quizState.props.preselectionStore.signal.remove(handler);\n};\n","import { length } from 'ramda';\n\nexport const randomElement = (items: Array<any>) =>\n  items[Math.floor(Math.random() * length(items))];\n","import { concat, length, take, takeLast } from 'ramda';\nimport { ChordT } from 'src/voicings/types';\n\nexport const invertChord = (chord: ChordT, pos: number) => {\n  function rotate(arr: ChordT) {\n    const maxNote = arr[arr.length - 1];\n    let first = take(1, arr);\n    const last = takeLast(length(arr) - 1, arr);\n    while (first[0] <= maxNote) {\n      first[0] += 12;\n    }\n    return concat(last, first);\n  }\n\n  function rotateBack(arr: ChordT) {\n    const minNote = arr[0];\n    let last = takeLast(1, arr);\n    const first = take(length(arr) - 1, arr);\n    while (last[0] >= minNote) {\n      last[0] -= 12;\n    }\n    return concat(last, first);\n  }\n\n  let result = chord;\n  for (let i = 0; i < Math.abs(pos); i++) {\n    result = pos > 0 ? rotate(result) : rotateBack(result);\n  }\n\n  return result;\n};\n\nexport const getInversionRange = (chord: ChordT) => {\n  const topC = 48;\n  let minInversion = 0;\n  let maxInversion = 0;\n  const l = chord.length;\n\n  while (invertChord(chord, maxInversion + 1)[l - 1] < topC) {\n    maxInversion += 1;\n  }\n\n  while (invertChord(chord, minInversion - 1)[0] >= 0) {\n    minInversion -= 1;\n  }\n\n  return [minInversion, maxInversion];\n};\n","import { add, always, map, pipe } from 'ramda';\nimport { clefOffsets, octaveRootNoteValue } from 'src/keyboard/keyConstants';\nimport { VoicingT } from 'src/voicings/types';\n\nexport const voicingToChord = (\n  voicing: VoicingT,\n  clef: string,\n  octaveIndex: number\n) => {\n  let rootNoteValue = octaveRootNoteValue(octaveIndex);\n  const keyOffset = clefOffsets[clef];\n\n  const result = pipe(\n    //\n    always(voicing.chord),\n    map(add(rootNoteValue + keyOffset))\n  )();\n  return result;\n};\n","import { map, range, sum } from 'ramda';\nimport { GroupT } from 'src/groups/types';\nimport { ClefT } from 'src/keyboard/types';\nimport { QueryT } from 'src/quiz/types';\nimport { mathMod } from 'src/utils/mathMod';\nimport { randomElement } from 'src/utils/random';\nimport { VoicingT } from 'src/voicings/types';\nimport { getInversionRange } from 'src/voicings/utils/invertChord';\nimport { voicingToChord } from 'src/voicings/utils/voicingToChord';\n\nconst getRandomInversion = (voicing: VoicingT, clef: ClefT) => {\n  const L = voicing.chord.length;\n\n  const [minInversion, maxInversion] = getInversionRange(\n    voicingToChord(voicing, clef, 1)\n  );\n  const inversionRange = range(minInversion, maxInversion + 1).filter((x) => {\n    return !voicing.inversions || voicing.inversions[mathMod(x, L)] !== false;\n  });\n  if (inversionRange.length === 0) {\n    return 0;\n  }\n  let inversion = randomElement(inversionRange);\n\n  // Try to bring inversion closer to zero using steps of voicing.chord.length inversions\n  // (which means its the same inversion, just at a different place on the keyboard)\n  while (\n    inversion + L <= maxInversion &&\n    Math.abs(inversion) > Math.abs(inversion + L)\n  ) {\n    inversion += L;\n  }\n  while (\n    inversion - L >= minInversion &&\n    Math.abs(inversion) > Math.abs(inversion - L)\n  ) {\n    inversion -= L;\n  }\n  return inversion;\n};\n\nexport const createQuery = (clefs: ClefT[], groups: GroupT[]): QueryT => {\n  const clef = randomElement(clefs);\n  const nrVoicings = sum(map((x: GroupT) => x.voicings.length)(groups));\n  const voicingIdx = Math.floor(Math.random() * nrVoicings);\n\n  let groupIdx = 0;\n  let count = groups[0].voicings.length;\n  while (voicingIdx >= count) {\n    groupIdx += 1;\n    count += groups[groupIdx].voicings.length;\n  }\n\n  const group = groups[groupIdx];\n  const voicing = group.voicings[voicingIdx - (count - group.voicings.length)];\n  const inversion = getRandomInversion(voicing, clef);\n\n  return {\n    clef,\n    group,\n    voicing,\n    inversion,\n  };\n};\n","import { ClefT } from 'src/keyboard/types';\nimport { GroupT } from 'src/groups/types';\nimport { input } from 'skandha';\n\nexport class Inputs {\n  @input groups: Array<GroupT> = [];\n  @input clefs: Array<ClefT> = [];\n}\n","import { computed } from 'mobx';\nimport { GroupT, GroupByIdT } from 'src/groups/types';\nimport { listToItemById } from 'src/utils/ids';\nimport { output } from 'skandha';\nimport { ClefT } from 'src/keyboard/types';\n\nexport class Outputs {\n  @output clefsDisplay: Array<ClefT> = [];\n  @output groupsDisplay: Array<GroupT> = [];\n\n  @computed get groupById(): GroupByIdT {\n    return listToItemById(this.groupsDisplay);\n  }\n}\n","import { setCallbacks } from 'aspiration';\nimport { action, observable, makeObservable } from 'mobx';\nimport {\n  addCleanUpFunctionToCtr,\n  facet,\n  getm,\n  cleanUpCtr,\n  mapDataToFacet,\n  installPolicies,\n  registerFacets,\n  ClassMemberT as CMT,\n} from 'skandha';\nimport { makeCtrObservable } from 'skandha-mobx';\nimport { getIds } from 'src/utils/ids';\nimport * as Facets from 'skandha-facets';\nimport * as Policies from 'src/quiz/QuizState/policies';\nimport * as FacetPolicies from 'skandha-facets/policies';\nimport {\n  Selection,\n  SelectionCbs,\n  handleSelectItem,\n} from 'skandha-facets/Selection';\nimport { Highlight, HighlightCbs } from 'skandha-facets/Highlight';\nimport { createQuery } from 'src/quiz/utils/createQuery';\nimport { PreselectionStore } from 'src/keyboard/PreselectionStore';\n\nimport { QueryT } from 'src/quiz/types';\nimport { GroupsStore } from 'src/groups/GroupsStore';\nimport { VoicingStore } from 'src/voicings/VoicingStore';\nimport { ClefStore } from 'src/keyboard/ClefStore';\nimport { Inputs } from 'src/quiz/QuizState/facets/Inputs';\nimport { Outputs } from 'src/quiz/QuizState/facets/Outputs';\nimport { ClefT } from 'src/keyboard/types';\nimport { GroupT } from 'src/groups/types';\n\ntype PropsT = {\n  clefStore: ClefStore;\n  groupsStore: GroupsStore;\n  voicingStore: VoicingStore;\n  preselectionStore: PreselectionStore;\n};\n\nexport class QuizState {\n  props: PropsT;\n  @observable query?: QueryT;\n  @observable nextQuery?: QueryT;\n\n  @facet inputs = new Inputs();\n  @facet outputs = new Outputs();\n\n  clefs = {\n    selection: new Selection(),\n    highlight: new Highlight(),\n  };\n  groups = {\n    selection: new Selection(),\n    highlight: new Highlight(),\n  };\n\n  _setClefsCallbacks(props: PropsT) {\n    const ctr = this.clefs;\n    setCallbacks(ctr.selection, {\n      selectItem: {\n        selectItem(this: SelectionCbs['selectItem']) {\n          handleSelectItem(ctr.selection, this.selectionParams);\n          FacetPolicies.highlightFollowsSelection(\n            ctr.selection,\n            this.selectionParams\n          );\n        },\n      },\n    } as SelectionCbs);\n    setCallbacks(ctr.highlight, {} as HighlightCbs);\n  }\n\n  _setGroupsCallbacks(props: PropsT) {\n    const ctr = this.groups;\n    setCallbacks(ctr.selection, {\n      selectItem: {\n        selectItem(this: SelectionCbs['selectItem']) {\n          handleSelectItem(ctr.selection, this.selectionParams);\n          FacetPolicies.highlightFollowsSelection(\n            ctr.selection,\n            this.selectionParams\n          );\n        },\n      },\n    } as SelectionCbs);\n    setCallbacks(ctr.highlight, {} as HighlightCbs);\n  }\n\n  _applyClefsPolicies(props: PropsT) {\n    const Inputs_items = [Inputs, 'clefs', this] as CMT;\n    const Outputs_display = [Outputs, 'clefsDisplay', this] as CMT;\n\n    const policies = [\n      mapDataToFacet(Outputs_display, getm(Inputs_items)),\n      // selection\n      Facets.selectionUsesSelectableIds(getm(Outputs_display)),\n    ];\n\n    installPolicies(policies, this.clefs);\n  }\n\n  _applyGroupsPolicies(props: PropsT) {\n    const Inputs_items = [Inputs, 'groups', this] as CMT;\n    const Outputs_display = [Outputs, 'groupsDisplay', this] as CMT;\n    const Outputs_itemById = [Outputs, 'groupById', this] as CMT;\n\n    const policies = [\n      mapDataToFacet(Outputs_display, getm(Inputs_items)),\n      // selection\n      Facets.selectionUsesSelectableIds(getm(Outputs_display), getIds),\n      Facets.selectionUsesItemLookUpTable(getm(Outputs_itemById)),\n      // highlight\n      Facets.highlightUsesItemLookUpTable(getm(Outputs_itemById)),\n    ];\n\n    installPolicies(policies, this.groups);\n  }\n\n  destroy() {\n    cleanUpCtr(this.clefs);\n    cleanUpCtr(this.groups);\n  }\n\n  constructor(props: PropsT) {\n    this.props = props;\n\n    registerFacets(this, {});\n    makeObservable(this);\n\n    registerFacets(this.clefs, { name: 'Clefs' });\n    this._setClefsCallbacks(props);\n    this._applyClefsPolicies(props);\n    makeCtrObservable(this.clefs);\n\n    registerFacets(this.groups, { name: 'Groups' });\n    this._setGroupsCallbacks(props);\n    this._applyGroupsPolicies(props);\n    makeCtrObservable(this.groups);\n\n    const cuf = Policies.selectClefBasedOnPreselection()(this);\n    addCleanUpFunctionToCtr(this.clefs, cuf);\n  }\n\n  @action setClefs(clefs: ClefT[]) {\n    this.inputs.clefs = clefs;\n    this.clefs.selection.ids = clefs;\n  }\n\n  @action setGroups(groups: GroupT[]) {\n    this.inputs.groups = groups;\n    this.groups.selection.ids = getIds(groups);\n  }\n\n  @action pickRandomChord() {\n    this.query =\n      this.nextQuery ??\n      createQuery(this.clefs.selection.ids, this.groups.selection.items ?? []);\n\n    this.nextQuery = createQuery(\n      this.clefs.selection.ids,\n      this.groups.selection.items ?? []\n    );\n\n    if (this.query) {\n      this.props.clefStore.setClef(this.query.clef);\n      this.props.voicingStore.setVoicing(this.query.voicing);\n      this.props.voicingStore.setInversion(this.query.inversion);\n    }\n  }\n}\n","export const voicingGroups = [\n  {\n    name: 'minor',\n    voicings: [\n      {\n        name: 'Min6,9',\n        chord: ['ninth', 'flat3', 'fifth', 'thirteenth'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'Min7,9',\n        chord: ['ninth', 'flat3', 'fifth', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '9',\n        chord: ['ninth', 'flat3', 'flat5', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'MinMaj9',\n        chord: ['ninth', 'flat3', 'fifth', 'seventh'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'Min6',\n        chord: ['flat3', 'fifth', 'thirteenth'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'Min7',\n        chord: ['flat3', 'fifth', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: '',\n        chord: ['flat3', 'flat5', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'Min',\n        chord: ['flat3', 'fifth'],\n        inversions: [true, true],\n      },\n      {\n        name: 'MinMaj',\n        chord: ['flat3', 'fifth', 'seventh'],\n        inversions: [true, true, true],\n      },\n    ],\n  },\n  {\n    name: 'fourths',\n    voicings: [\n      {\n        name: 'SoWhat',\n        chord: ['root', 'fourth', 'flat7', 'flat3', 'fifth'],\n        inversions: [false, true, false, false, false, false],\n      },\n    ],\n  },\n  {\n    name: 'major',\n    voicings: [\n      {\n        name: 'Maj6,9',\n        chord: ['ninth', 'third', 'sixth'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'Maj7,9',\n        chord: ['ninth', 'third', 'fifth', 'seventh'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: 'Maj6',\n        chord: ['third', 'sixth'],\n        inversions: [true, true],\n      },\n      {\n        name: 'Maj7',\n        chord: ['third', 'fifth', 'seventh'],\n        inversions: [true, true, true],\n      },\n      {\n        name: 'Maj',\n        chord: ['third', 'fifth'],\n        inversions: [true, true],\n      },\n    ],\n  },\n  {\n    name: 'dominant',\n    voicings: [\n      {\n        name: '7,13',\n        chord: ['third', 'thirteenth', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: '7,9',\n        chord: ['ninth', 'third', 'fifth', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b13',\n        chord: ['third', 'flat13', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: '7,9,b13',\n        chord: ['ninth', 'third', 'flat13', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b5',\n        chord: ['third', 'flat5', 'flat7'],\n        inversions: [true, true, true],\n      },\n      {\n        name: '7,b5,b13',\n        chord: ['third', 'flat5', 'flat13', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b9',\n        chord: ['flat9', 'third', 'fifth', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b9,13',\n        chord: ['flat9', 'third', 'thirteenth', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7,b9,b13',\n        chord: ['flat9', 'third', 'flat13', 'flat7'],\n        inversions: [true, true, true, true],\n      },\n      {\n        name: '7',\n        chord: ['third', 'fifth', 'flat7'],\n        inversions: [true, true, true],\n      },\n    ],\n  },\n  {\n    name: 'magic-dom',\n    voicings: [\n      {\n        name: 'magic dom root',\n        chord: ['third', 'flat7', 'ninth', 'fifth', 'root'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 2nd',\n        chord: ['fifth', 'root', 'fourth', 'flat7', 'ninth'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 3rd',\n        chord: ['flat7', 'ninth', 'five', 'root', 'third'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 5th',\n        chord: ['flat7', 'third', 'thirteen', 'second', 'fifth'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 6th',\n        chord: ['root', 'fourth', 'flat7', 'third', 'thirteen'],\n        inversions: [true, false, false, false, false],\n      },\n      {\n        name: 'magic dom 7th',\n        chord: ['ninth', 'five', 'root', 'fourth', 'flat7'],\n        inversions: [true, false, false, false, false],\n      },\n    ],\n  },\n];\n","import * as React from 'react';\nimport { action, reaction } from 'mobx';\n\nimport { QuizState } from 'src/quiz/QuizState';\nimport { CtrProvider } from 'react-default-props-context';\nimport { useStore } from 'src/app/components';\nimport { voicingGroups } from 'src/voicings/voicingGroups';\nimport { clefs } from 'src/keyboard/keyConstants';\nimport { parseVoicingGroups } from 'src/voicings/parse';\n\ntype PropsT = React.PropsWithChildren<{}>;\n\n// Note: don't observe this with MobX\nexport const QuizStateProvider: React.FC<PropsT> = (props: PropsT) => {\n  const {\n    groupsStore,\n    clefStore,\n    voicingStore,\n    preselectionStore,\n  } = useStore();\n  const groups = parseVoicingGroups(voicingGroups);\n\n  const createState = action(() => {\n    const state = new QuizState({\n      groupsStore,\n      clefStore,\n      voicingStore,\n      preselectionStore,\n    });\n    state.setClefs(clefs);\n    state.setGroups(groups);\n    return state;\n  });\n\n  const updateState = (state: QuizState) => {\n    reaction(\n      () => ({}),\n      (inputs) => {},\n      {\n        fireImmediately: true,\n      }\n    );\n  };\n\n  const getDefaultProps = (state: QuizState) => {\n    return {\n      quizState: () => state,\n      clefs: () => state.outputs.clefsDisplay,\n      clefsSelection: () => state.clefs.selection,\n      clefsHighlight: () => state.clefs.highlight,\n      clef: () => state.clefs.highlight.item,\n      groups: () => state.outputs.groupsDisplay,\n      groupsSelection: () => state.groups.selection,\n      groupsHighlight: () => state.groups.highlight,\n      group: () => state.groups.highlight.item,\n    };\n  };\n\n  return (\n    <CtrProvider\n      createCtr={createState}\n      updateCtr={updateState}\n      destroyCtr={(state: QuizState) => state.destroy()}\n      getDefaultProps={getDefaultProps}\n    >\n      {props.children}\n    </CtrProvider>\n  );\n};\n","import React from 'react';\nimport { Router, Switch, Route } from 'react-router-dom';\nimport { observer } from 'mobx-react-lite';\nimport { createBrowserHistory } from 'history';\nimport { QuizView } from 'src/quiz/components';\nimport { QuizStateProvider } from 'src/quiz/components';\n\ntype PropsT = {};\n\nexport const history = createBrowserHistory();\n\nexport const UrlRouter: React.FC<PropsT> = observer((props: PropsT) => {\n  return (\n    <Router history={history}>\n      <Switch>\n        <Route path=\"\">\n          <QuizStateProvider>\n            <QuizView />\n          </QuizStateProvider>\n        </Route>\n      </Switch>\n    </Router>\n  );\n});\n","import { reaction } from 'mobx';\nimport { AppStore } from 'src/app/AppStore';\n\nexport const voicingStoreUsesSelectedClef = () => (appStore: AppStore) => {\n  reaction(\n    () => appStore.clefStore.clef,\n    (clef) => {\n      appStore.voicingStore.clef = clef;\n    },\n    { fireImmediately: true }\n  );\n};\n","import { GroupByIdT } from 'src/groups/types';\nimport { observable, makeObservable } from 'mobx';\n\nexport class GroupsStore {\n  @observable groupById: GroupByIdT = {};\n\n  constructor() {\n    makeObservable(this);\n  }\n\n  loadGroups() {}\n}\n","import { action, computed, makeObservable, observable } from 'mobx';\n\nimport { clefC } from 'src/keyboard/keyConstants';\nimport { ClefT } from 'src/keyboard/types';\n\nexport class ClefStore {\n  clefLetter = clefC;\n  clefSharp = false;\n  clefFlat = false;\n\n  constructor() {\n    makeObservable(this, {\n      clefLetter: observable,\n      clefSharp: observable,\n      clefFlat: observable,\n      setClefLetter: action,\n      setClefSharp: action,\n      setClefFlat: action,\n      clef: computed,\n    });\n  }\n\n  setClefLetter = (clefLetter: string) => {\n    this.clefLetter = clefLetter;\n  };\n\n  setClefSharp = (x: boolean) => {\n    this.clefSharp = x;\n    if (x) this.clefFlat = false;\n  };\n\n  setClefFlat = (x: boolean) => {\n    this.clefFlat = x;\n    if (x) this.clefSharp = false;\n  };\n\n  get clef() {\n    return this.clefLetter + (this.clefSharp ? '#' : this.clefFlat ? 'b' : '');\n  }\n\n  setClef(x: ClefT) {\n    const clefLetter = x[0];\n    this.setClefLetter(clefLetter);\n    const modulate = x[1];\n    this.setClefFlat(modulate == 'b');\n    this.setClefSharp(modulate == '#');\n  }\n}\n","import { makeObservable, observable, action } from 'mobx';\nimport { Signal } from 'micro-signals';\n\nexport class PreselectionStore {\n  signal = new Signal();\n  clefLetter?: string = undefined;\n  isSharpening?: boolean = undefined;\n  isFlattening?: boolean = undefined;\n\n  constructor() {\n    makeObservable(this, {\n      clefLetter: observable,\n      isSharpening: observable,\n      isFlattening: observable,\n      setClefLetter: action,\n      setIsSharpening: action,\n      setIsFlattening: action,\n      reset: action,\n    });\n  }\n\n  setClefLetter = (x?: string) => (this.clefLetter = x);\n  setIsSharpening = (x?: boolean) => (this.isSharpening = x);\n  setIsFlattening = (x?: boolean) => (this.isFlattening = x);\n\n  reset = () => {\n    if (this.clefLetter) {\n      this.signal.dispatch({\n        topic: 'PreselectionStore.selectClef',\n        details: {\n          clefLetter: this.clefLetter,\n          isSharpening: this.isSharpening,\n          isFlattening: this.isFlattening,\n        },\n      });\n    }\n    this.setIsFlattening(false);\n    this.setIsSharpening(false);\n    this.setClefLetter(undefined);\n  };\n}\n","import { action, computed, makeObservable, observable } from 'mobx';\nimport { clamp, length } from 'ramda';\nimport { parseVoicing } from 'src/voicings/parse';\nimport { VoicingT } from 'src/voicings/types';\nimport { getInversionRange, invertChord } from 'src/voicings/utils/invertChord';\nimport { voicingToChord } from 'src/voicings/utils/voicingToChord';\n\nconst cScale = parseVoicing({\n  id: 'Chromatic',\n  name: 'Chromatic',\n  chord: [\n    'root',\n    'flat9',\n    'ninth',\n    'flat3',\n    'third',\n    'fourth',\n    'flat5',\n    'fifth',\n    'flat6',\n    'sixth',\n    'flat7',\n    'seventh',\n  ],\n});\n\nexport class VoicingStore {\n  clef: string = 'C';\n  inversion: number = 0;\n  voicing: VoicingT = cScale;\n\n  constructor() {\n    makeObservable(this, {\n      clef: observable,\n      inversion: observable,\n      voicing: observable,\n      chord: computed,\n      nrOfVoices: computed,\n      inversionRange: computed,\n      setInversion: action,\n      setVoicing: action,\n    });\n  }\n\n  setInversion = (x: number) => {\n    this.inversion = clamp(\n      this.inversionRange[0],\n      this.inversionRange[1]\n    )(x) as any;\n  };\n\n  setVoicing = (voicing: VoicingT) => {\n    this.voicing = voicing;\n  };\n\n  get inversionRange() {\n    return getInversionRange(voicingToChord(this.voicing, this.clef, 1));\n  }\n\n  get nrOfVoices() {\n    return length(this.voicing.chord);\n  }\n\n  get chord() {\n    return this.clef\n      ? invertChord(voicingToChord(this.voicing, this.clef, 1), this.inversion)\n      : undefined;\n  }\n}\n","import { makeObservable, observable } from 'mobx';\nimport * as Policies from 'src/app/AppStore/policies';\nimport { GroupsStore } from 'src/groups/GroupsStore';\nimport { ClefStore } from 'src/keyboard/ClefStore';\nimport { PreselectionStore } from 'src/keyboard/PreselectionStore';\nimport { VoicingStore } from 'src/voicings/VoicingStore';\n\nexport class AppStore {\n  clefStore = new ClefStore();\n  groupsStore: GroupsStore;\n  preselectionStore = new PreselectionStore();\n  scaleFactor = 1;\n  voicingStore = new VoicingStore();\n\n  setWindowWidth(width: number) {\n    this.scaleFactor = width >= 1420 ? 1 : width / 1420;\n  }\n\n  constructor() {\n    this.setWindowWidth(window.innerWidth);\n\n    makeObservable(this, {\n      clefStore: observable,\n      groupsStore: observable,\n      preselectionStore: observable,\n      scaleFactor: observable,\n      voicingStore: observable,\n    });\n    this.groupsStore = new GroupsStore();\n    this.applyPolicies();\n  }\n\n  applyPolicies() {\n    Policies.voicingStoreUsesSelectedClef()(this);\n  }\n}\n","import React from 'react';\nimport { AppStore } from 'src/app/AppStore';\n\nconst appStore = new AppStore();\n\nexport const StoreContext = React.createContext<AppStore>(appStore);\n\nexport const StoreProvider: React.FC = ({ children }) => {\n  return (\n    <StoreContext.Provider value={appStore}>\n      {children}\n    </StoreContext.Provider>\n  );\n};","import React from 'react';\nimport { StoreContext } from 'src/app/components/StoreProvider';\n\nexport const useStore = () => {\n  const store = React.useContext(StoreContext);\n  if (!store) {\n    throw new Error('useStore must be used within a StoreProvider.');\n  }\n  return store;\n};","import { observer } from 'mobx-react-lite';\nimport React from 'react';\nimport { UrlRouter } from 'src/app/components/UrlRouter';\nimport { useStore } from 'src/app/components/useStore';\nimport './App.scss';\n\nexport const App = observer(() => {\n  const appStore = useStore();\n\n  React.useEffect(() => {\n    function handleResize() {\n      appStore.setWindowWidth(window.innerWidth);\n    }\n\n    window.addEventListener('resize', handleResize);\n  });\n\n  const isPortrait = appStore.scaleFactor < 0.4;\n  const useLandscapeDiv = (\n    <div className=\"App__useLandscape\">\n      <div className=\"text-2xl my-auto mx-4\">\n        Please rotate your device to landscape mode\n      </div>\n    </div>\n  );\n  return (\n    <div className=\"App w-screen\">\n      {isPortrait ? useLandscapeDiv : <UrlRouter />}\n    </div>\n  );\n});\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from 'src/app/components';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}